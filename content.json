{"pages":[],"posts":[{"title":"摄影 || 破晓时分","path":"2019/06/03/photo5/","permalink":"https://jinnm.github.io/2019/06/03/photo5/","content":"<p>五一节和室友兴奋地计划去宝石山蛤蟆峰看日出，当天四点钟爬起来（令人惊讶的是，四点钟起床比七点半起床轻松许多……）出了校门后，三个人越走越兴奋，一路小跑起来，走到宝石山最近的一个入口时就直接用高德地图导航去蛤蟆峰。</p><p>事实证明，这是个错误的决定。</p><p>我们三个没怎么爬过山的人天真的以为，一座山几乎可以等同于一个椭圆锥，只不过尖端可能不在中心。这样的话从哪个山脚上去都差不多，无非就是有的先平坦后陡峭，有的是全程舒缓一些的陡坡。</p><p>然后我们跟着高德地图看起来非常正常的路线规划，上坡下坡上坡下坡~翻过了一座又一座的小山峰，眼看着日出时间快到了2D上却仍在龟速运动，所以即便翻山越岭累得不行还是加快了速度（像不像赶ddl的自己）。</p><p>最后总算是赶上了，相机拍不出的美丽~所以大部分照片是下山过程中以及之后拍的。<br><img src=\"http://ww1.sinaimg.cn/large/006tNc79gy1g3pib2a3l8j31930u0qv6.jpg\" alt><br><img src=\"http://ww1.sinaimg.cn/large/006tNc79gy1g3pibg17kqj31930u0hdv.jpg\" alt><br><img src=\"http://ww1.sinaimg.cn/large/006tNc79gy1g3pic202puj31930u0b2b.jpg\" alt><br><img src=\"http://ww2.sinaimg.cn/large/006tNc79gy1g3pidf3trcj31930u01kz.jpg\" alt><br><img src=\"http://ww4.sinaimg.cn/large/006tNc79gy1g3pidc1d0yj31930u0b2c.jpg\" alt><br><img src=\"http://ww1.sinaimg.cn/large/006tNc79gy1g3pid7bpjqj31930u0e83.jpg\" alt><br><img src=\"http://ww1.sinaimg.cn/large/006tNc79gy1g3picz4qqkj31930u0npf.jpg\" alt><br><img src=\"http://ww1.sinaimg.cn/large/006tNc79gy1g3pid42qjoj31930u0x6r.jpg\" alt><br><img src=\"http://ww4.sinaimg.cn/large/006tNc79gy1g3picvjntgj31930u0u10.jpg\" alt><br><img src=\"http://ww2.sinaimg.cn/large/006tNc79gy1g3pifd1p7hj31930u04qr.jpg\" alt><br><img src=\"http://ww1.sinaimg.cn/large/006tNc79gy1g3pif8yut9j31930u0qv7.jpg\" alt><br><img src=\"http://ww2.sinaimg.cn/large/006tNc79gy1g3pigej1d1j31930u0e84.jpg\" alt><br><img src=\"http://ww4.sinaimg.cn/large/006tNc79gy1g3pigbisjqj31930u0kjo.jpg\" alt><br><img src=\"http://ww2.sinaimg.cn/large/006tNc79gy1g3pig6mb0ij31930u0qv8.jpg\" alt><br><img src=\"http://ww4.sinaimg.cn/large/006tNc79gy1g3pig35iymj31920u0npe.jpg\" alt><br>最后这张前一天晚上吃夜宵拍的<br><img src=\"http://ww3.sinaimg.cn/large/006tNc79gy1g3pii128yuj31930u0qv7.jpg\" alt></p>"},{"title":"我的「利器」","path":"2019/05/31/Liqi/","permalink":"https://jinnm.github.io/2019/05/31/Liqi/","content":"<p>偶然看到了<a href=\"https://liqi.io/community/\" target=\"_blank\" rel=\"noopener\">「利器社群计划」</a>，也来分享一下自己的「利器」，一直认为工具是非常重要的，把工作环境调整到最舒服的状态，甚至细节到IDE主题的选择，才可以让自己的工作效率最高化，最重要的是，让工作成为一件令人愉快的事。</p><p>下面将根据要求聊聊以下这些</p><ul><li>介绍一下你自己和所做的工作。</li><li>你的职业生涯的转折点是什么？</li><li>你都在使用哪些硬件？</li><li>软件呢？</li><li>你最理想的工作环境是什么？</li><li>你平时获得工作灵感的方式有哪些？</li><li>推荐一件生活中的利器给大家。</li></ul><h5 id=\"介绍一下你自己和所做的工作\"><a href=\"#介绍一下你自己和所做的工作\" class=\"headerlink\" title=\"介绍一下你自己和所做的工作\"></a>介绍一下你自己和所做的工作</h5><p>Jinnm，本科大三在读，目前的工作是技术美术实习生（TA，Technical Artist）。</p><h5 id=\"你的职业生涯的转折点是什么\"><a href=\"#你的职业生涯的转折点是什么\" class=\"headerlink\" title=\"你的职业生涯的转折点是什么\"></a>你的职业生涯的转折点是什么</h5><p>刚开始职业生涯的我，转折点大概就是获得第一份实习的时候……</p><h5 id=\"你都在使用哪些硬件\"><a href=\"#你都在使用哪些硬件\" class=\"headerlink\" title=\"你都在使用哪些硬件\"></a>你都在使用哪些硬件</h5><ul><li>公司的Win主机。一般游戏公司给员工的配置，生产力的主要来源，由于它的存在，天天想去公司，毕竟看电影打游戏都是它最合适啊。</li><li>MacBook Pro (Retina, 13-inch, Early 2015)。日常使用非常舒服，10小时的续航，充足的接口，舒服的键盘，强大的触控板，另外个人也更喜欢macOS。</li><li>iPhone SE。对我来说手机的用处就是即时通讯、资讯浏览、移动支付、音乐，这个需求下，4英寸的手机再合适不过了（什么时候出SE2！！）</li><li>iPad mini4。用来玩手游，看pdf，健身的时候或交通工具上看电影。</li><li>Olympus om1，Leica minilux。喜欢胶片哈哈哈。</li><li>1T和3T移动硬盘，前者用来当备份盘（成为mac备份盘之后，格式就不能被Win读取了），后者用来存放电影和剧集，以及其他一些资料。</li></ul><h5 id=\"软件呢\"><a href=\"#软件呢\" class=\"headerlink\" title=\"软件呢\"></a>软件呢</h5><p>职业上专门使用的软件就不说了，就是游戏引擎和一大堆DCC工具。<br>讲一些通用的吧。</p><ul><li>VS Code。自从开始用Unity之后正式从Sublime Text转Code了，VS Code更适合比较大量的代码管理，而且插件支持更好，另外我在Sublime使用的主题Glacier，VS Code也有，这是让我轻松转过来的一大原因哈哈哈哈。目前感受到的唯一不如Sublime的就是打开速度，尤其是仅仅想新建一个md的时候，但还能接受。</li><li>PDF Expert。PDF查看编辑器基本只用过这一个，因为对它没有什么不满的，基本需求都能满足。</li><li>印象笔记。这个对我来说真是太重要了！不过主要是笔记对我来说很重要，因为经常需要做一些记录。免费版可以两个终端同步，一般笔记本+公司电脑够用了，另外它的网页剪藏功能非常方便，可以将网页存成笔记。</li><li>滴答清单。管理自己的todolist，这一块移动端做得好的很多，但它mac端也做得很好用，就选择了它。</li><li>Parallels Desktop。虽然基本需求macOS都能满足，但跟别人合作的时候，可能会突然有win的需求，尤其是上学期间，老师要求的软件可能只有win下有。偶尔使用的情况下，使用虚拟机当然比装双系统合适，而且两个系统三指滑动切换，系统间复制粘贴都非常方便，不过实习之后有了公司的win主机，似乎已经不需要它了。</li><li>iPic。mac图床工具首选，好用方便。</li><li>Xnip。截图工具，除了基本的截图功能外，还可以滑动截图截长图。可以设置开机自动启动而且菜单栏不显示图标，所以用起来仿佛系统自带。</li><li>豆瓣。不仅仅是电影，还有很多有趣的人~</li></ul><h5 id=\"你最理想的工作环境是什么\"><a href=\"#你最理想的工作环境是什么\" class=\"headerlink\" title=\"你最理想的工作环境是什么\"></a>你最理想的工作环境是什么</h5><ul><li>Win主机+双显示器或广角显示器，舒适的键盘，优秀的网络环境（被校网折磨了三年）。</li><li>茶水、洗手间、餐厅较近，有方便的午睡方式。</li><li>和同事沟通方便。</li></ul><h5 id=\"你平时获得工作灵感的方式有哪些\"><a href=\"#你平时获得工作灵感的方式有哪些\" class=\"headerlink\" title=\"你平时获得工作灵感的方式有哪些\"></a>你平时获得工作灵感的方式有哪些</h5><p>浏览知乎的行业大牛动态，大牛博客，公司内部的经验文档，GDC等行业分享，几个非常熟的TA朋友（可以大胆问可能很傻的问题），TA同事们，最后用印象笔记做摘录和总结，部分写成博客。</p><h5 id=\"推荐一件生活中的利器给大家\"><a href=\"#推荐一件生活中的利器给大家\" class=\"headerlink\" title=\"推荐一件生活中的利器给大家\"></a>推荐一件生活中的利器给大家</h5><p>洗脸巾。尤其是住寝室的同学，往往没有合适的地方挂置毛巾，因为卫生间一般没有窗户，毛巾就处在潮湿而且不通风的环境下，需要经常洗，有了洗脸巾就方便卫生很多，擦桌子等也比普通纸巾更好。棉质也相对环保。</p><blockquote><p>本文参与了「利器社群计划」，发现更多创造者和他们的工具<br><a href=\"https://liqi.io/community/\" target=\"_blank\" rel=\"noopener\">https://liqi.io/community/</a></p></blockquote>"},{"title":"Gamma校正","path":"2019/05/30/GammaCorrection/","permalink":"https://jinnm.github.io/2019/05/30/GammaCorrection/","content":"<h3 id=\"起因\"><a href=\"#起因\" class=\"headerlink\" title=\"起因\"></a>起因</h3><p>前段时间尝试在SP中实现unity中的效果，碰到一个问题就是我们项目的Unity使用的是gamma空间（因为低端机对于linear空间是不支持的，但这种情况下应该手动gamma校正，不过我们项目没有对颜色做任何处理），而SP只能使用linear，所以为了在SP中实现Unity的「gamma」效果，需要在SP的shader中手动反向gamma校正。</p><p>先来尝试一下一般的情况，也就是Unity设置为gamma空间，但通过在shader中手动校正，达到线性空间的效果，目标是使得linear的效果=gamma+手动校正。</p><h3 id=\"原理简介\"><a href=\"#原理简介\" class=\"headerlink\" title=\"原理简介\"></a>原理简介</h3><p>这方面找到了冯乐乐写的这篇博文<a href=\"https://blog.csdn.net/candycat1992/article/details/46228771\" target=\"_blank\" rel=\"noopener\">我理解的伽马校正（Gamma Correction）</a>，非常详细的讲解了原理和方法。如果只是想知道怎么gamma校正，这里做一个能够被快速接受的解释。</p><p>首先看一下 真实场景 -&gt; 摄像机捕捉 -&gt; 显示器显示 这个过程中经过的变换<br><img src=\"http://ww4.sinaimg.cn/large/006tNc79ly1g3kjr3bu1jj31400co771.jpg\" alt><br>其中，display gamma是显示设备的技术客观存在的，为了校正这个误差，在图像捕捉设备中加了一个encoding gamma，使得end-to-end gamma，也就是两者的乘积，为1，这样真实场景的亮度值就等于显示器的值了。</p><p>后来，微软联合爱普生、惠普提供了sRGB标准，推荐显示器中display gamma值为2.2，那么encoding gamma的值为1/2.2。而对于渲染的人来说，并没有图像捕捉设备这一环节，但是显示器的2.2却客观存在，所以我们需要在输出显示颜色之前，使用encoding gamma，才能达到模仿真实环境，人眼看着更舒服的效果。</p><h3 id=\"Unity的颜色空间设置\"><a href=\"#Unity的颜色空间设置\" class=\"headerlink\" title=\"Unity的颜色空间设置\"></a>Unity的颜色空间设置</h3><p>Unity中可以设置两种颜色模式，在Edit-&gt;Project Settings-&gt;Player-&gt;Color Space，其中gamma代表什么都不干，一般颜色会暗很多。而选择linear的话，Unity会把所有的输入颜色，包括纹理等，默认使用sRGB，先转换到线性空间，也就是pow2.2（sRGB也可以关掉，但是gamma空间下默认都是关，点击开关不会产生影响），在线性空间下做各种运算，然后在输出前pow1.0/2.2，最后交给显示器自动pow2.2，最后看到的就是线性的了。所以实际上，选择linear的话，shader输出的是gamma空间的颜色，是显示器把它变成了线性（有点绕），而选择gamma空间的话，关键不是空间错了，而是它在非线性空间下做了混合，最后显示器转成线性空间就会出问题。也就是说，如果不做混合，这两个选项的结果是一样的。</p><p>冯乐乐的文章中给出了gamma颜色模式下，颜色混合产生的问题，左边为gamma，右边为linear。<br><img src=\"http://ww2.sinaimg.cn/large/006tNc79ly1g3km6uvmmjj30g005kab5.jpg\" alt></p><p>所以如果不设置成linear，颜色会变得难看不仅是变暗这么简单，有些地方还会出现明显不符合常理的颜色，比如上图交界处居然出现了蓝色。</p><p>而遗憾的是，根据<a href=\"https://docs.unity3d.com/Manual/LinearRendering-GammaTextures.html\" target=\"_blank\" rel=\"noopener\">Unity官方文档</a>关于线性空间的描述，Android设备需要支持OpenGL ES 3.0和至少Android 4.3的系统，IOS需要Metal graphics API（系统至少为IOS 8），所以除非放弃这一部分用户，否则只能使用gamma，但是为了正常的颜色表现，我们需要在shader中进行手动的gamma校正。</p><h3 id=\"实践\"><a href=\"#实践\" class=\"headerlink\" title=\"实践\"></a>实践</h3><p>我们来试试看，将空间设置为gamma，然后手动校正，在输出前pow1.0/2.2，由于我忽略了贴图没有转到线性空间的问题，所以得到了这样的结果。<br><img src=\"http://ww3.sinaimg.cn/large/006tNc79ly1g3jezadg9cj30fq0f1qbz.jpg\" alt><br><img src=\"http://ww3.sinaimg.cn/large/006tNc79ly1g3jeza1hfij30fs0fbthj.jpg\" alt><br><img src=\"http://ww3.sinaimg.cn/large/006tNc79ly1g3jez8yre4j30g10f2n6f.jpg\" alt></p><p>将贴图pow2.2后就使linear的效果=gamma+手动校正了<br><img src=\"http://ww3.sinaimg.cn/large/006tNc79ly1g3jfatj0mqj30f40f6wnh.jpg\" alt></p><p>最后尝试在SP中手动反向校正，也就是使gamma=linear+反向校正，顺利使SP的效果和gamma下的Unity一致。<br><img src=\"http://ww3.sinaimg.cn/large/006tNc79ly1g3jfb2enx2j30rs0fl4gg.jpg\" alt></p><h3 id=\"提高效率\"><a href=\"#提高效率\" class=\"headerlink\" title=\"提高效率\"></a>提高效率</h3><p>Unity实际上有提供关于颜色空间转换的接口，函数名不带exact的就是近似算法</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inline float GammaToLinearSpaceExact (float value)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        if (value &lt;= 0.04045F)</span><br><span class=\"line\">            return value / 12.92F;</span><br><span class=\"line\">        else if (value &lt; 1.0F)</span><br><span class=\"line\">            return pow((value + 0.055F)/1.055F, 2.4F);</span><br><span class=\"line\">        else</span><br><span class=\"line\">            return pow(value, 2.2F);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">inline half3 GammaToLinearSpace (half3 sRGB)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        // Approximate version from http://chilliant.blogspot.com.au/2012/08/srgb-approximations-for-hlsl.html?m=1</span><br><span class=\"line\">        return sRGB * (sRGB * (sRGB * 0.305306011h + 0.682171111h) + 0.012522878h);</span><br><span class=\"line\"></span><br><span class=\"line\">        // Precise version, useful for debugging.</span><br><span class=\"line\">        //return half3(GammaToLinearSpaceExact(sRGB.r), GammaToLinearSpaceExact(sRGB.g), GammaToLinearSpaceExact(sRGB.b));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> inline float LinearToGammaSpaceExact (float value)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">        if (value &lt;= 0.0F)</span><br><span class=\"line\">             return 0.0F;</span><br><span class=\"line\">        else if (value &lt;= 0.0031308F)</span><br><span class=\"line\">            return 12.92F * value;</span><br><span class=\"line\">        else if (value &lt; 1.0F)</span><br><span class=\"line\">            return 1.055F * pow(value, 0.4166667F) - 0.055F;</span><br><span class=\"line\">        else</span><br><span class=\"line\">           return pow(value, 0.45454545F);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">inline half3 LinearToGammaSpace (half3 linRGB)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        linRGB = max(linRGB, half3(0.h, 0.h, 0.h));</span><br><span class=\"line\">        // An almost-perfect approximation from http://chilliant.blogspot.com.au/2012/08/srgb-approximations-for-hlsl.html?m=1</span><br><span class=\"line\">        return max(1.055h * pow(linRGB, 0.416666667h) - 0.055h, 0.h);</span><br><span class=\"line\"></span><br><span class=\"line\">        // Exact version, useful for debugging.</span><br><span class=\"line\">        //return half3(LinearToGammaSpaceExact(linRGB.r), LinearToGammaSpaceExact(linRGB.g), LinearToGammaSpaceExact(linRGB.b))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"Unity Shader转SP","path":"2019/05/29/Unity2SP/","permalink":"https://jinnm.github.io/2019/05/29/Unity2SP/","content":"<p>前段时间研究了一下怎么把Unity的shader搬到SP，原因是：美术在SP中制作贴图，生成的美术资源放进Unity之后就完全是另一个样子了，来回修改非常麻烦。所以希望SP中就显示引擎里的效果。</p><p>通过观察sp自带的clay shader</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// - Ambient and diffuse contribution</span><br><span class=\"line\">diffuseShadingOutput((ambient + NdV) * diffuse);</span><br><span class=\"line\">// - Specular contribution</span><br><span class=\"line\">specularShadingOutput(vec3(specular * pow(NdV, 64.0 * clayGloss)));</span><br></pre></td></tr></table></figure><p>发现两点<br>1、这个shader里根本就没有用光照信息（NdV是Normal * View），以及调节光照方向并不会产生变化，但它是不是完全和自带光照无关还需确认。<br>2、sp的shader提供了一些针对pbr不同通道的接口，但是不知道里面具体做了啥。</p><p>为了弄清楚这两点，尝试一下phong光照模型，只用diffuse和specular，ambient暂时不要。<br>按照clay shader的方法写了一个phong的</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import lib-vectors.glsl</span><br><span class=\"line\">import lib-alpha.glsl</span><br><span class=\"line\">import lib-pbr.glsl</span><br><span class=\"line\">import lib-utils.glsl</span><br><span class=\"line\">//- Phong shader</span><br><span class=\"line\">//- ===========</span><br><span class=\"line\">//: param auto channel_basecolor</span><br><span class=\"line\">uniform sampler2D basecolor_tex;</span><br><span class=\"line\">//: param custom &#123; &quot;default&quot;: 0.5, &quot;label&quot;: &quot;Specular&quot;, &quot;min&quot;: 0.001, &quot;max&quot;: 1.0 &#125;</span><br><span class=\"line\">uniform float specular;</span><br><span class=\"line\">//: param custom &#123; &quot;default&quot;: 0.5, &quot;label&quot;: &quot;Glossiness&quot;, &quot;min&quot;: 0.001, &quot;max&quot;: 1.0 &#125;</span><br><span class=\"line\">uniform float gloss;</span><br><span class=\"line\">//- Entry point of the shader.</span><br><span class=\"line\">void shade(V2F inputs)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t//- We generate local world space vectors</span><br><span class=\"line\">\tLocalVectors vectors = computeLocalFrame(inputs);</span><br><span class=\"line\">\t//- Simulate camera aligned lighting</span><br><span class=\"line\">\tfloat NdV = max(0.0, dot(vectors.normal, vectors.eye));</span><br><span class=\"line\">\tvec3 baseColor = getBaseColor(basecolor_tex, inputs.tex_coord);</span><br><span class=\"line\">\t//- Ambient and diffuse contribution</span><br><span class=\"line\">\tdiffuseShadingOutput(NdV * baseColor);</span><br><span class=\"line\">\t//- Specular contribution</span><br><span class=\"line\">\tspecularShadingOutput(specular * vec3(pow(NdV, 64.0 * gloss)));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>按照这个写法写unity shader，并将颜色空间改为linear（因为SP中是默认Linear）</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// ...</span><br><span class=\"line\">fixed3 normalizedNormal = normalize(i.worldNormal);</span><br><span class=\"line\">fixed3 normalizedViewDir = normalize(i.worldViewDir);</span><br><span class=\"line\">float NdV = saturate(dot(normalizedNormal, normalizedViewDir));</span><br><span class=\"line\"></span><br><span class=\"line\">fixed3 albedo = tex2D(_MainTex, i.uv);</span><br><span class=\"line\">fixed3 diffuse = albedo * NdV;</span><br><span class=\"line\">fixed3 specular = _Specular * pow(NdV, 64.0 * _Glossness);</span><br><span class=\"line\">return fixed4((diffuse + specular), 1);</span><br><span class=\"line\">// ...</span><br></pre></td></tr></table></figure><p>然后发现！几乎完全一样！<br><img src=\"http://ww1.sinaimg.cn/large/006tNc79ly1g3j4sf8t93j30ur0f2dz7.jpg\" alt></p><p>所以<br>1、ShadingOutput的接口貌似啥也没干，就是最后把几个接口的值相加输出<br>2、SP自带光照可以直接不要，只用自己的光照<br>所以理论上，只要把unity的shader翻译成glsl，并把光照参数手动写进去就好了。来试试看光照。</p><p>在之前shader的基础上加上光源。Unity使用一个平行光，SP中使用和Unity中一样的光照参数。</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fixed3 halfDir = normalize(normalizedLightDir + normalizedViewDir);</span><br><span class=\"line\">float NdV = saturate(dot(normalizedNormal, normalizedViewDir));</span><br><span class=\"line\">float NdL = saturate(dot(normalizedNormal, normalizedLightDir));</span><br><span class=\"line\">float NdH = saturate(dot(normalizedNormal, halfDir));</span><br><span class=\"line\">fixed3 albedo = tex2D(_MainTex, i.uv);</span><br><span class=\"line\">fixed3 diffuse = albedo * NdL;</span><br><span class=\"line\">fixed3 specular = _Specular * pow(NdH, 64.0 * _Glossness);</span><br><span class=\"line\">return fixed4((diffuse + specular), 1);</span><br></pre></td></tr></table></figure><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// mainLight的参数做个对外接口，可调节</span><br><span class=\"line\">vec3 halfDir = normalize(mainLight.direction + vectors.eye);</span><br><span class=\"line\">float NdV = max(0.0, dot(vectors.normal, vectors.eye));</span><br><span class=\"line\">float NdL = max(0.0, dot(vectors.normal, mainLight.direction));</span><br><span class=\"line\">float NdH = max(0.0, dot(vectors.normal, halfDir));</span><br><span class=\"line\">vec3 baseColor = getBaseColor(basecolor_tex, inputs.tex_coord);</span><br><span class=\"line\">//- Ambient and diffuse contribution</span><br><span class=\"line\">diffuseShadingOutput(NdL * baseColor);</span><br><span class=\"line\">//- Specular contribution</span><br><span class=\"line\">specularShadingOutput(specular * vec3(pow(NdH, 64.0 * gloss)));</span><br></pre></td></tr></table></figure><p>变换光源方向看看效果，可以发现达到了一致。<br><img src=\"http://ww4.sinaimg.cn/large/006tNc79ly1g3j4xz1cb8j30ut0f9k9y.jpg\" alt><br><img src=\"http://ww4.sinaimg.cn/large/006tNc79ly1g3j4xsqw1dj30vd0ffqje.jpg\" alt><br><img src=\"http://ww2.sinaimg.cn/large/006tNc79ly1g3j4xg1u48j30vq0f4djr.jpg\" alt></p>"},{"title":"美术流程亲自踩坑","path":"2019/04/23/ArtPipeline/","permalink":"https://jinnm.github.io/2019/04/23/ArtPipeline/","content":"<p>从0开始做了一个角色，流程是<br>Maya低模 -&gt; ZBrush高模 -&gt; Topogun拓扑 -&gt; Maya展UV -&gt; SP画贴图 -&gt; 八猴展示<br>比上次做场景多了一个Zbrush高模的流程。</p><p>大的制作方法很容易获取到，小的制作细节就不太知道了，碰到很多坑，所幸勾搭了一个美术讨教……</p><p>记录一下血泪教训</p><ul><li>Maya建模时，多用顶点面模式检查一下有没有多余的点和边，及时解决。一般看出多余边的话，点也是重复的，可以直接选中点合并，多余边也就会没有（maya中两点之间应该只能是一条边），但是有的时候会很玄学，这个方法不起作用，那么可以把重复边一侧的面删除，填充洞，然后用多切割工具做必要的面划分。看多余的点还有一个方法，打开uv编辑器，创建中选摄像机，有多余边的地方，场景视图中会显示白色（就是uv壳的边缘效果）。</li><li>ZBrush雕完后用减面大师进行减面，但是一般结果是三角面，可以使用ZRemesher转成四边形。</li><li>拓扑可以在ZBrush中将高模复制一份，对图层上面那个使用ZRemesher转成低模，并按project按钮使得低模和高模贴合，然后分别导出。但是ZRemesher工具做出来的面的大小都差不多，就导致不需要细节的地方浪费面，需要细节的地方面数不够，所以需要在Topogun中调整。</li><li>Topogun使得导进来的低模变成可编辑状态吸附在高模上的方法：先导入高模，导入低模时不要选Load Reference，而是选Load Scene，把文件格式改成obj。</li><li>拓扑完后就可以搭角色了，把位置什么都摆好，因为考虑展uv的接缝放哪里的时候可以根据搭完的角色的情况。</li><li>导进sp前，高模全都转化成软边，低模uv接缝为硬边，其他软边。根据sp中想分开处理的部分，附上不同的材质，并做好命名。最好导出成fbx。</li></ul><p>八猴中最终的渲染图是这样的<br><img src=\"http://ww3.sinaimg.cn/large/006tNc79ly1g3jgi2nvdlj31hc0u01kz.jpg\" alt><br><img src=\"http://ww1.sinaimg.cn/large/006tNc79ly1g3jghyolb4j31hc0u01kz.jpg\" alt><br>至少这次能看了，回过去看上次做的<a href=\"https://jinnm.github.io/2018/08/22/changjingsheji/\">场景</a>，辣眼睛……</p>"},{"title":"摄影 || 胶片X夜景","path":"2019/03/30/photo4/","permalink":"https://jinnm.github.io/2019/03/30/photo4/","content":"<p>手持傻瓜胶片机拍夜景，想想就很崩啊……不过还是想尝试下，了解一下自己的相机<br>出片之后最大的感受是，闪光灯一打真的很丑，整个画面就死了的感觉</p><p><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l3ls2tqaj31930u04qs.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l3lxr902j31930u0kjm.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l3m5yhnkj31930u01l0.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l3mcml7qj31930u01kz.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tKfTcly1g1l3mfzi2ej31930u07wj.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l3mmk6rxj31930u0npf.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l3mpql2wj31930u0e83.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l3n1691gj31930u01l0.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l3n56u6xj31930u0x6r.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l3nbbvqzj31930u0u0z.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l3nf5lgaj31930u0qv7.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g1l3np6s1yj31930u0u0z.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g1l3nwvf0pj31930u04qs.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l3o18kpyj31930u0u0y.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l3mvrtrcj31930u0qv8.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l495xbq2j307605gaaf.jpg\" alt></p>"},{"title":"摄影 || DX Code是什么","path":"2019/03/25/photo3/","permalink":"https://jinnm.github.io/2019/03/25/photo3/","content":"<p>我有两台胶片机，一台是全手动的Olympus om1，还有一台是傻瓜式的Konica kmini，全手动的需要自己调焦调光圈，自己根据胶片调ISO，甚至因为买不到合适电压的测光电池，还要因为电压过大，将ISO调的比胶片本身设定的低，另外也要自己过片自己回卷。习惯了做全套之后，我第一次用傻瓜胶片机的时候，找了半天调节ISO的地方，自动调焦自动过片我都能理解，但是ISO总要自己调吧？因为这主要不是外界景物的问题，而是胶卷本身啊。网上一查才知道原来胶卷上有DX Code这个东西，可以使得相机自动调节ISO。</p><p>就是胶卷上的这个黑白的方块格（我之前一直以为是装饰！突然想到电影的打板也是这样一块黑一块白的，这么说来很可能也有含义，但没查到，不过查到了理发店门口为什么也有那种黑白相间的东西~）</p><p><img src=\"http://ww2.sinaimg.cn/large/006tNc79ly1g3j59gqrmqj317m0sihdt.jpg\" alt></p><p>每几个方格1或0的组合表示不同的意思，通过DX Code，相机可以得知胶卷的感光度，可拍张数以及宽容度。</p><p><img src=\"http://ww3.sinaimg.cn/large/006tNc79ly1g3j59b25ikj31880sqac5.jpg\" alt><br><img src=\"http://ww4.sinaimg.cn/large/006tNc79ly1g3j59aj4a7j31880kidgx.jpg\" alt></p>"},{"title":"Wireframe without Geometry Shader","path":"2019/03/24/shader3/","permalink":"https://jinnm.github.io/2019/03/24/shader3/","content":"<p>这篇来讨论一下渲染线框的方法，目前知道的方法有<br>1、在贴图上画<br>2、把线框的模型建出来<br>3、使用geometry shader计算<br>4、使用图形接口的fill mode<br>5、使用pTex，每张贴图是一个线框</p><p>前两条是美术的方法，要看情况，如果只是单纯的渲染出线框，肯定是希望用程序的方法解决，减少美术工作量，但是有时候对线框的需求有点风格化，比如颜色的渐变，模型起伏大的地方线框粗，这样的话还可能还是美术来做效果更好一些。第3条es是不支持的，第4条没找到unity中的接口，而且es好像也不支持……第5条会因为面片的形状大小对贴图上的线框做拉伸，导致粗细不均匀，不过可以在屏幕空间上做判断来改善这个问题。</p><p>目前这几个方法，125都可以算美术的方法，34移动端不支持，即OpenGL ES3.1及以下版本支持的，那么有没有不需要gs的计算的方法？</p><p>最后我自己没想出来，但是在github上找到一个方法，计算代价不大，主要需要额外的uv或模型。<br><a href=\"http://github.com/miguel12345/UnityWireframeRenderer\" target=\"_blank\" rel=\"noopener\">http://github.com/miguel12345/UnityWireframeRenderer</a></p><p>大致讲一下他的思路：<br>关键在于，重新组织mesh的信息，mesh中有索引数组可以帮助我们组织三角形，取得这个情报后，把它放进顶点的UV，使得shader可以看这个情报。</p><p>1、在原物体上挂一个新的GameObject，把原mesh的信息放进新的mesh<br>2、复制信息时，做一些手脚：将一个三角形的三个点的UV分别设置为00, 01, 10<br>3、于是就可以根据一个点的uv位置知道它在三角形中什么位置了，而且计算到边的距离运算量很小</p><p>但是很容易发现这样有个问题，uv位置只是一个相对位置，如果给这个比例值限定一个固定的阈值的话，假设一个正方形拉长，那么有两条边会变粗，大小不同的三角形粗细也会不一样。而我们的目的是在最后的像素空间上看起来粗细一样。如何解决这个问题呢？</p><p>可以使用导数，求得屏幕空间相邻两个像素的uv差值，假设三角形大小是x，uv大小是1，那么导数求得的就是1/x，乘以描边大小假设是3，3/x也是个比例值，就是描边粗细在三角形中的比例，这个值作为uv这个比例值的阈值的话，就不会有变形的问题。实际实现时，要同时考虑u轴v轴两条轴的影响，使得旋转不变形。</p>"},{"title":"描边shader再探讨","path":"2019/03/12/shader2/","permalink":"https://jinnm.github.io/2019/03/12/shader2/","content":"<p>之前的一篇描边shader只是讲了实现的大致思路，但是实际去实现一个普通的角色描边shader的话，会发现很多很多的问题……</p><p>普通的描边感觉比较好也比较常用的方式是用两个pass，底下那层在屏幕空间沿法线外扩，且剔除正面，上面那层用普通的。<br>但是真的使用起来会用很多很麻烦的事。</p><h3 id=\"一、关于是否只要外轮廓\"><a href=\"#一、关于是否只要外轮廓\" class=\"headerlink\" title=\"一、关于是否只要外轮廓\"></a>一、关于是否只要外轮廓</h3><p>图一为只要外轮廓，图二为中间也要，注意看手，手这个角度在外轮廓中，但也有描边。<br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g10bsluy9fj30ey0ew44t.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tKfTcly1g10bsl95zoj30en0epag3.jpg\" alt></p><p>如果只要外轮廓，轮廓内部的描边不要的话，可以在第一个pass设置ZWrite off，后一个pass就可以严严实实的盖住它，只露出旁边一圈。<br>关闭深度写入很省心但是会有很多问题，比如Geometry之后会有天空盒的渲染，就会把深度未写入的描边给盖住，就需要调整渲染队列，然后又会带来新的问题……这个时候这个做法就已经不经济了。另一个方法是用Offset指令控制深度测试，让后面的描边颜色稍稍靠后一点。但是往后多少呢，少了的话，一部分面片穿插不能解决，多了的话，角色后面有个靠的很近的物体可能就会出问题……</p><p>而如果要内部描边的话，让一些背面的渲染结果“露出来”，就会因为模型的缘故出现各种奇奇怪怪的问题，严重的比如……<br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g10bsj35gmj30mk0d2442.jpg\" alt></p><p>即便模型建的比较规范，没有严重的面片穿插问题，也会出现一些描边位置奇怪的问题，比如<br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g10bsh924vj30b708wn22.jpg\" alt></p><p>你会感觉你希望的描边并不是这样的……不过想做到这个要求就比较高了，计算机视觉这方面要做的好都需要复杂得多的算法，比如用双阈值判断是否连接……而且关于哪些地方应该描边有很多主观的因素，想象你自己在一张原画上画，很多地方该不该描也要犹豫。</p><h3 id=\"二、关于如何解决面片割裂开\"><a href=\"#二、关于如何解决面片割裂开\" class=\"headerlink\" title=\"二、关于如何解决面片割裂开\"></a>二、关于如何解决面片割裂开</h3><p>就是沿法线外扩的时候，面片会分开，像这样：<br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g10bsf840aj30ag0a5dfz.jpg\" alt></p><p>如果外扩不是很多的话，可以将要外扩的方向和这个点相对于模型中心的方向lerp一下，可以改善一点点……<br>另外有个方法是在导入设置中设置法线为calculate<br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g11epxjlk7j30eq05574d.jpg\" alt><br>但是这么做一方面比较费，另一方面效果还是要看情况，比如修改前修改后分别是这个效果<br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g11epzs98uj30w80cyq5u.jpg\" alt></p><p>要效果好一点，目前知道的唯一方法是……让美术改模型……（美术：那你给我做一个工具吧！）</p><h3 id=\"三、关于描边是否渐变\"><a href=\"#三、关于描边是否渐变\" class=\"headerlink\" title=\"三、关于描边是否渐变\"></a>三、关于描边是否渐变</h3><p>有些时候需要描边往内渐隐，会有一种发光感<br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g10bsf0i3nj30br0b3acy.jpg\" alt></p><p>第一反应：简单啊，就是另一种描边的方式，根据法线和视线夹角的值加描边，角色的边缘和视线的值差不多是九十度。但是还有另外一个要求，只要外轮廓，中间不要加……如果按之前想的方法，中间所有凸起的地方旁边都会有一圈发光描边，就不符合要求了。</p><p>第一个想法：第一个pass外扩，第二个pass往内缩一些，然后把第一个pass的渐变限制在露出来的那一截。实际操作的时候，由于露出来的那一截需要比较宽的一段，顶点沿法线移动太多导致很多面片分离以及穿插的问题……</p><p>第二个想法：用模型空间的坐标做判断，设计一个函数使得，顶点离原点越近，描边影响就越小，同时x轴上的影响更剧烈一些（因为这个shader用在角色上，x轴比较短，y轴比较长）。这样的话，角色一旦是张开手臂的话，手臂上就没有描边了……而且因为头和身子头发都是分开的mesh，也会有问题，随着角色形象的变化还有很多很多问题………总的来说这个方法太过“定制化”了，毫无实用性。</p><p>第三个想法：一般中间不需要描边的部分离摄影机更近，所以可以计算顶点与摄像机的距离，同时计算模型上的(0, y, 0)点与摄像机的距离，两个距离差值越大，描边越弱。这个效果相对来说还可以。<br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g10bse849cj30a309agnm.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tKfTcly1g10bsdaqj4j30au09cwgl.jpg\" alt></p><p>但是也会有很多的问题<br>1、中心即便突出一些，也突出的很少，需要比较高的精度<br>2、不同角色差异会很大<br>3、当角色斜侧着身子就会不符合想要的效果。比如像上图这个角度，最左边的左手和最右边的头发应该是同等的描边效果，然而它们分别是离摄像机最远的一点和最近的一点。</p><h3 id=\"四、关于使用后处理\"><a href=\"#四、关于使用后处理\" class=\"headerlink\" title=\"四、关于使用后处理\"></a>四、关于使用后处理</h3><p>其实用后处理很多时候效果会好很多，毕竟发生的很多问题都是3D方面的问题……然而因为后处理太费，尤其是对于移动端，这是一种尽量不要去考虑的方式……<br>后处理的方式就是添加一个额外相机，复制原相机属性，只将需要描边的物体渲染在RT，可以通过layer指定渲染物体。然后将RT扩展出外边，类似高斯模糊，如果不想要渐变的描边效果可以做判断，只要大于0就算描边区域（记得用step不要用if）</p><h3 id=\"五、总结\"><a href=\"#五、总结\" class=\"headerlink\" title=\"五、总结\"></a>五、总结</h3><p>目前没有找到完美的方案，要结合实际使用情况选择一种相对来说效果好一些的方案。接下来还有描边shader第三篇，讲讲崩坏3的做法。</p>"},{"title":"描边Shader","path":"2018/12/14/shader1/","permalink":"https://jinnm.github.io/2018/12/14/shader1/","content":"<p>写一个使3D物体带描边的shader是基于GPU的渲染的一项作业，关于这个作业有一些思考。</p><p>描边shader有很多种写法，最常见最通用的是法线外拓的方法，就是用两个pass，第一个pass渲染红色的放大版模型（之后用A pass表示），第二个pass渲染正常的物体（之后用B pass表示），这样正常物体渲染结果会盖住A pass的结果，但由于A pass把模型放大了，所以会露出旁边的一圈“描边”。</p><p>而如何放大模型？就是把模型顶点沿法线向外移动（移动距离用offset表示）。<br>为了方便看到A pass的情况，互换了两个pass的位置，用立方体做模型，得到如下情况。<br><img src=\"http://ws3.sinaimg.cn/large/006tNc79ly1fyxujoyv86j30bi0ahwep.jpg\" alt></p><p>发现A pass的前面在最顶层，接下来是B pass，最后是A pass的背面。因为默认开了Zwrite和Ztest，所以会根据顶点坐标的前后渲染。</p><p>那么给A pass设置剔除正面只渲染背面（Cull Front）：<br><img src=\"http://ws1.sinaimg.cn/large/006tNc79ly1fyxujq94osj30ao0acmxb.jpg\" alt></p><p>会发现因为顶点沿法线向外移动导致面片分开，使得描边不连续。(这个问题可以通过在模型导入面板中把法线设置为calculate解决)</p><p>换个复杂的模型：<br><img src=\"http://ws3.sinaimg.cn/large/006tNc79ly1fyxujrhyusj308p0eyq5z.jpg\" alt></p><p>由于模型复杂，有些面片虽然是背面的，但还是会穿透B pass的面片。<br>试想如果B pass能把A pass完全盖住就解决这个问题了。</p><p>于是把A pass移到B pass之前，同时设置Zwrite off，也就是说不管A pass的顶点在哪里，都会被B pass的渲染结果盖住，这样就解决了这个问题。<br><img src=\"http://ws3.sinaimg.cn/large/006tNc79ly1fyxujspf00j308o0eu41l.jpg\" alt></p>"},{"title":"Code, design, movie and photography","path":"2018/11/06/Title/","permalink":"https://jinnm.github.io/2018/11/06/Title/","content":"<p>Codemoph = Code, Design, Movie, Photography.</p>"},{"title":"游戏运营讲座","path":"2018/11/04/youce2/","permalink":"https://jinnm.github.io/2018/11/04/youce2/","content":"<p>虽然以后肯定做技术，不过今天去听了腾讯某游戏运营负责人的讲座，感觉收获颇多。（我好像是觉得什么都很有趣的体质？）由于今天讲的内容感觉太太太难接触到了，所以一定要把它记下来，可惜当时讲座要求手机关机而且没带电脑，我现在只能凭借记忆补全内容，有些做法以及原因想不太起来了QAQ。</p><p>比如这位老师介绍说一个月中，大概第二周会集中拉高收入，第四周会拉高用户。原因是，月初大家比较有钱，而月末关系到下个月的新版本发布，版本发布时活跃用户数多才有意义。</p><p>其中举了两个游戏的游戏的例子。（我最喜欢这种分析实例的讲座了！！！）</p><h3 id=\"刺激战场\"><a href=\"#刺激战场\" class=\"headerlink\" title=\"刺激战场\"></a>刺激战场</h3><h5 id=\"兑换小白裙\"><a href=\"#兑换小白裙\" class=\"headerlink\" title=\"兑换小白裙\"></a>兑换小白裙</h5><p><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fwwcyh50l9j30go087myn.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fwwd106ug7j314e0ogq91.jpg\" alt><br>这个活动取得了空前的效果，具体忘记达到了怎样的程度了……反正每到中午，大家都疯狂在群里问你有没有平底锅，我给你一个三倍镜之类。<br>关于这个活动的重点：</p><ul><li>小白裙在端游是极其珍贵的物品。当时刺激战场玩家中端游玩家达到40%。</li><li>好友间的分享只有一次。意犹未尽的感觉。</li></ul><h5 id=\"集结好友-瓜分红包\"><a href=\"#集结好友-瓜分红包\" class=\"headerlink\" title=\"集结好友 瓜分红包\"></a>集结好友 瓜分红包</h5><p>模仿拼多多的模式，大概就是在游戏中完成某个任务，比如击杀了两个人，就可以获得一个红包，红包里有很多礼品，只有你成功邀请几个好友“拼团”之后，才能瓜分红包拿到里面的东西。这个活动当时打破了微信固化了很久的红包模式，至今仍是最热的红包活动。<br>这个活动的重点：</p><ul><li>学习了拼多多“有毒”的模式。<br>小插曲：这位老师当时接触拼多多后觉得这个模式有毒，于是给团队布置任务：下次例会每个人带一件从拼多多免费获得的东西。之后团队就做了这个活动。</li></ul><h3 id=\"全民飞机大战\"><a href=\"#全民飞机大战\" class=\"headerlink\" title=\"全民飞机大战\"></a>全民飞机大战</h3><h5 id=\"前期的情况\"><a href=\"#前期的情况\" class=\"headerlink\" title=\"前期的情况\"></a>前期的情况</h5><ul><li>想要在年后做一个活动，因为年后是游戏行业很恐怖的时间点，一般都是断崖式下跌。</li><li>即将迎来第一次版本更新，而之前的游戏研发只用了两个月，是赶出来的。</li><li>游戏玩法单调，靠着这种方式挽尊：出一个需要巨额金币的新品迫使用户打游戏攒金币。</li><li>调研用户后发现两大需求：机甲和社交。</li></ul><h5 id=\"活动内容\"><a href=\"#活动内容\" class=\"headerlink\" title=\"活动内容\"></a>活动内容</h5><p>于是在年后，第一次版本更新的一周后推出黄金斗士这架战机，这个活动几个关键点：</p><ul><li>时间：年后</li><li>黄金斗士198元</li><li>黄金斗士是很强的战机</li><li>首充6元送168钻石（价值16元）</li><li>DAU：打满6局奖励……</li><li>PCU：限时金币翻倍<br>黄金斗士大概长这样emmmm<br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fwwdmwozc2j30ap0aygmz.jpg\" alt></li></ul><p>这个活动1.5周后推出了价格便宜的变形金刚。</p><h5 id=\"活动由来\"><a href=\"#活动由来\" class=\"headerlink\" title=\"活动由来\"></a>活动由来</h5><p>那么做这些活动的原因是什么呢？</p><p>首先针对用户需求中的社交，推出合体的玩法，两架飞机可以合体来获取对方飞机的一部分属性，比如合体黄金斗士可以在死后再滑行8秒（在游戏中非常关键！）。</p><p>而机甲方面则定下了两款：圣斗士星矢和变形金刚。并做了这样的考虑：</p><ul><li>圣斗士星矢——归为土豪款，金黄色，中国玩家的最爱。虽然美术组的审美很好，但最后还是屈服于玩家的口味。</li><li>变形金刚——归为平民款，价格便宜。</li></ul><p>土豪款是为了造成贫富差距的感觉，有了优越感才有人愿意买呀。而平民款则满足了普通玩家对于机甲的需求。</p><p>为什么定价198元呢？这里需要知道更多的信息，在此之前还有两个重要的战机。</p><ul><li>凤凰：48w金币购买，48w金币升级。48w金币大概需要玩45天，就是前面说的迫使用户打游戏攒金币的新品。</li><li>丘比特：168元购买，800元升级。丘比特性能比较弱，最后效果奇差。</li><li>黄金斗士：198元购买，48w金币升级。</li></ul><p>后面的48w金币很好理解，比起丘比特的天价升级费用，这个升级条件会刺激玩家购买黄金斗士，而且黄金斗士又比丘比特强很多（这个故事告诉我们，之前做的太差也是有好处的），最重要的是，一部分玩家之前为了升级凤凰已经攒的差不多了！手持可用于升级的金币，不到两百获得最最最高配战机，的确很有诱惑力。而198元则是数据分析的结果，大部分玩家消费都在200元以下，超过两百元就会犹豫。</p><p>最后，为什么要等到新版本发布后的一周才做活动？因为游戏开发只用了两个月，这又是第一次版本更新，很有可能会有大bug，这样的话，没有人还愿意付费。</p><p>还有几个小地方，比如首充奖励，这个只是借着大活动顺便增加付费用户。（此处我个人想法：还可以为之后的变形金刚铺垫）</p><h5 id=\"活动效果\"><a href=\"#活动效果\" class=\"headerlink\" title=\"活动效果\"></a>活动效果</h5><p>具体数据忘记了，反正也是很厉害。满贴吧都是“求合体黄豆（黄金斗士简称），加微信”。</p><p>以上两个分析案例只是本次讲座冰山一角，印象比较深。整个讲座体现的运营核心不是收入而是用户：如果你没有用户，何谈收入，如果你有用户，又何必担心收入。</p>"},{"title":"游戏策划基础","path":"2018/11/03/youce/","permalink":"https://jinnm.github.io/2018/11/03/youce/","content":"<h3 id=\"作业题目\"><a href=\"#作业题目\" class=\"headerlink\" title=\"作业题目\"></a>作业题目</h3><p>《谁更无聊》：你跟对手一起进入一个游戏，屏幕上除了关闭按钮什么都没有。只要对手比你先按下关闭按钮，那么你就赢了。</p><p>在不改变核心玩法的前提下，添加哪些设计可以让这一款游戏变得不那么无聊。请从策划的不同分工角度，分类进行设计添加。</p><h3 id=\"作业提交内容\"><a href=\"#作业提交内容\" class=\"headerlink\" title=\"作业提交内容\"></a>作业提交内容</h3><p><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fwv114tzzjj30ct06p3yi.jpg\" alt></p><h5 id=\"核心玩法策划\"><a href=\"#核心玩法策划\" class=\"headerlink\" title=\"核心玩法策划\"></a>核心玩法策划</h5><ul><li>游戏开始前，显示对手的所获金币数和所玩局数。</li><li>游戏开始后，整个界面只有中心的大关闭按钮，谁先按到这个按钮谁就输了，游戏也同时结束。而在游戏结束前，玩家可以在屏幕上用手指滑动（当然不能碰到关闭按钮）。</li><li>游戏结束后，会计算两位玩家滑动距离的差值，胜者可以获得与差值对应的金币，而败者会被扣除与差值对应的金币。</li><li>特殊情况，如果直到“极限时间”也依然没有人按到按钮的话，滑动距离多的一方获得与差值对应的金币，少的一方扣除与差值对应的金币。</li></ul><h5 id=\"系统策划\"><a href=\"#系统策划\" class=\"headerlink\" title=\"系统策划\"></a>系统策划</h5><p>按钮模式系统、滑动距离计算系统、金币系统、计时系统、玩家匹配系统。</p><h5 id=\"关卡策划\"><a href=\"#关卡策划\" class=\"headerlink\" title=\"关卡策划\"></a>关卡策划</h5><p>玩家可以选择不同的按钮模式进行游戏（按钮的形状、布局会有区别）。</p><h5 id=\"数值策划\"><a href=\"#数值策划\" class=\"headerlink\" title=\"数值策划\"></a>数值策划</h5><ul><li>对于胜者败者，滑动距离差值对应金币数的规则。</li><li>极限时间的设置。</li><li>如果到了极限时间，最后的金币计算会变成普通情况的两倍。</li><li>根据玩家的游戏情况判断玩家的情况，匹配合适的玩家。</li></ul><h5 id=\"文学策划\"><a href=\"#文学策划\" class=\"headerlink\" title=\"文学策划\"></a>文学策划</h5><p>在游戏开始前，快速使玩家明白规则。在游戏结束后用合适的语言告知玩家结果。</p><h5 id=\"玩法分析\"><a href=\"#玩法分析\" class=\"headerlink\" title=\"玩法分析\"></a>玩法分析</h5><p>首先，滑动距离越长，按到按钮的风险越大。因为如果想获得比较长的滑动距离，最好的方式是【高频率】【尽量长的直线来回滑动距离】，按钮的存在限制了直线来回滑动距离，而且越想增大距离风险越大。同样越增加频率，碰到按钮的风险也越大。所以想要在短时间获得高滑动距离又不碰到按钮是比较困难的。</p><p>但是，滑动距离并不是越长越好，也有可能是越短越好，比如一个高滑动距离玩家不小心按到按钮，你的滑动距离是0的话获利最大。具体如何选择要看玩家的策略（线索来自对手的所获金币数和所玩局数）。</p><p>所以玩家在这个游戏中需要在不按到按钮的情况下，赌自己划多长的距离合适。激进的话很容易按到按钮而被扣金币，保守的话如果对手也一直没按到按钮，很可能会被扣高额金币。</p>"},{"title":"摄影 || 第二卷","path":"2018/10/28/photo2/","permalink":"https://jinnm.github.io/2018/10/28/photo2/","content":"<p>Olympus om-1</p><p><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fwo9wtchiij31kw11vx6q.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fwo9wrmqkej31hu28jnpf.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fwo9wpmpewj31kw11vqv7.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fwo9wnmbjij31kw11v4qs.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fwo9wkgsklj31kw11vx6s.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fwo9whkxccj31kw11vnpg.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fwo9wen4c8j31kw11ve84.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fwo9wchu0kj31kw11vb2c.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fwo9w57dfyj31kw11vx6r.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fwo9w1sux6j31kw11v7wk.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fwo9vzmleuj31kw11v1l0.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fwo9vxgqomj31kw11vnph.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fwo9zj97jxj31kw11vkjo.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fwo9zg24hqj31kw11vu0z.jpg\" alt></p><p>Konica kmini</p><p><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l38qst8kj318t0u0u10.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tKfTcly1g1l38kfuknj318t0u07wk.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l38dx5mhj31930u0u0z.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tKfTcly1g1l393fzebj30u0193x6q.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l38xdg2lj31930u0b2c.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l388i791j31930u07wk.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l3aeakf8j318t0u0u10.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g1l3dietltj31930u0u0z.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tKfTcly1g1l37putf6j31930u0kjn.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l37howhvj31930u0b2c.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l3785k33j31930u07wk.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tKfTcly1g1l37164hvj31930u0x6r.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g1l36u34bkj31930u07wk.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l36mc6qdj31930u0kjn.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tKfTcly1g1l36hm1gaj31930u0u0z.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l3estxpqj31930u01l0.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l3644sudj31930u0b2c.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tKfTcly1g1l35xsgy1j31930u0b2c.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tKfTcly1g1l35rzpm7j31930u04qs.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tKfTcly1g1l35l4yagj31930u0u0z.jpg\" alt></p>"},{"title":"剧本策划","path":"2018/10/26/Juben/","permalink":"https://jinnm.github.io/2018/10/26/Juben/","content":"<p>由于我们专业有些人以后会去当游戏策划或者做动画，所以专业选修里设置了剧本策划这个课程，外聘了浙江传媒学院老师。原本就很喜欢电影，于是就选了这门课。</p><h3 id=\"第一阶段\"><a href=\"#第一阶段\" class=\"headerlink\" title=\"第一阶段\"></a>第一阶段</h3><p>前几节课的作业是找2-3个人物，想想他们可能发生的故事，分析创作的可能性<br>于是大概想了这样一个故事</p><h5 id=\"主要人物\"><a href=\"#主要人物\" class=\"headerlink\" title=\"主要人物\"></a>主要人物</h5><p><strong>陈医生</strong>：全市最好的牙科医生，有个即将高考的儿子，沉迷游戏，高考堪忧。<br><strong>王铭</strong>：陈医生的实习医生。<br><strong>王锵</strong>：王铭的弟弟，同样即将高考，成绩非常好，正常发挥可以考入北大。</p><h5 id=\"人物小传\"><a href=\"#人物小传\" class=\"headerlink\" title=\"人物小传\"></a>人物小传</h5><p>【陈医生】自小就非常优秀，成长经历也非常顺利，考上非常好的医学院，毕业后通过自己的努力成为全市最好的牙科医生，人生最大的挫折是他的儿子——陈震。陈医生时不时怀疑陈震是不是他的亲儿子，陈震小的时候就不聪明，成绩也差，网络游戏兴起后就沉迷游戏，更加一发不可收拾。陈医生每每想到这个儿子就觉得丢脸。他的同事们虽然自知医术不如陈医生，但是想到自己的孩子比陈医生的优秀，心里也便平衡一些，甚至有点同情陈医生有这样一个不争气的儿子。同事们这样看待他，陈医生心中自然也是有数的。</p><p>【王铭】自小就非常优秀，成长经历也非常顺利，如今即将从浙大医学院毕业，在省口腔医院实习，实习导师是全市最好的牙科医生。高中的很多同学本科毕业就工作了，王铭也听闻一些同学的经历：有的同学凭借家里的关系有了不错的职位，薪水高而且工作轻松。有的同学虽然本科的大学很差，但学的计算机，本科毕业也顺利找到了薪水非常高的工作。王铭想到自己辛辛苦苦读了七年医科，最后却都不如这些成绩比他差得多的同学，感到失落和懊恼。他曾经为了能够取得好成绩所牺牲的那些，现在看来非常幼稚可笑。突然感觉自己的人生虽然顺利但也平淡，似乎预见到了自己庸庸碌碌的一生，便更加失落。</p><p>【王锵】自小就非常优秀，成长经历也非常顺利，高中成绩经常处在全校第一，并通过化学竞赛拿到了北大一本线录取的优惠名额。于他来说，北大已是囊中之物，他是老师的骄傲，同学们的羡慕对象，他突然觉得从小备受亲戚称赞的哥哥王铭不过如此。高考前夕突然发现自己失去了高中的所有知识，一瞬间，仿佛从高空跌入谷底。</p><h5 id=\"故事主线\"><a href=\"#故事主线\" class=\"headerlink\" title=\"故事主线\"></a>故事主线</h5><p>【起】一天，王锵单独跟陈医生见面，恳求陈医生把他四天前拔掉的智齿移植回去，理由是，他拔掉这颗智齿后，智力倒退回了三年前，停留在初中刚毕业的时候。</p><p>【承】陈医生觉得荒谬，但由于王锵执意坚持，而且似乎他也只是想试试，便觉得帮他装上去看看也无妨。碰巧陈医生的儿子最近也要拔智齿……王铭则安慰弟弟不必如此在意高考，表示自己即便考上名校，到如今也不如很多以前成绩差的同学。</p><p>【转】在约定的那天，陈医生掉包了王锵的智齿，给他装上了刚从上一个患者口中拔下来的智齿。不料，王铭再次将真智齿掉包，意图出售给他人，于是陈医生给自己儿子装上了被王铭掉包了的智齿。</p><p>【合】从医院出来后，王锵和陈医生的儿子焦急地等待着恢复……</p><h5 id=\"故事灵感\"><a href=\"#故事灵感\" class=\"headerlink\" title=\"故事灵感\"></a>故事灵感</h5><p>灵感主要来自于彭浩翔的一个小短篇《指甲刀人魔》，有改变成电影，可惜电影并不好看，但是这个故事我莫名很喜欢。</p><p>开篇就是男主的女朋友有一天突然跟他说：“我是指甲刀人魔。”所谓指甲刀人魔，就是以吃指甲刀为生的人。非常莫名其妙吧？男主想让女朋友吃指甲刀证明给自己看，女朋友却很生气：吃指甲刀是我们的生活方式，不是为了给你们表演来满足你们的猎奇心理的。男主试图通过其他小细节观察，但最后发现，他既无法证明这件事是真的，也没有办法证明它是假的。男主最后选择了无条件相信，卖掉了自己的车帮助女友实现愿望——开一家指甲刀餐厅，但是这个过程中却无时无刻不受“你的女友是个骗子”这种想法的影响。</p><p>有一部电影有类似的情节，《那个男人来自地球》中，一所大学各个专业的教授聚集在一个即将离开的同事的小屋中聚会，那个同事突然说：“其实我已经活了几千年了。”大家都觉得荒唐。一屋子的教授所懂得知识的深度和广度都让人敬佩，但即便如此也却没有办法证伪。相比《指甲刀人魔》，这部电影所涉及的东西更加宏大，编剧显然博古通今（与故事发生的地点局限在一间小屋子里形成鲜明对比，堪称最省钱科幻片）。但依然是《指甲刀人魔》更加生活化的情节更打动我，同时它突出了这样一个结果：</p><p>一件荒谬的，可以当做玩笑忽略的事，最终却切切实实地影响到了人的生活，甚至最终改变了人。</p><p>于是就写了智齿这个故事，结构其实是一样的。开篇也是一个很荒谬的设定：王锵说拔掉了智齿，就拔掉了他高中三年的学习成果。这个设定同样不能证明真实性。而陈医生，王铭甚至王锵，实际上刚开始都是不相信的，但都因为各自的原因选择了相信。王锵高考在即，突然失去了高中时期的知识，如果不相信智齿，那么他就没有任何措施可以解决这个问题，智齿是他最后的希望。陈医生如果相信智齿，他就有机会让自己的儿子考上最好的大学。王铭如果相信智齿，他就可以借此得到一大笔钱，发泄自己不得志的痛苦。于是这三个人都因为开篇关于智齿的“猜想”，搅入了这个漩涡。至于这个猜想是不是真的实际上已不重要。</p><h3 id=\"第二阶段\"><a href=\"#第二阶段\" class=\"headerlink\" title=\"第二阶段\"></a>第二阶段</h3><p>《智齿》剧本</p><p>1，省口腔医院 日 内<br>【王铭在桌边写着上一个病人的记录，陈医生坐在牙科椅边整理工具】<br>陈医生：今天看的还蛮快的，只剩最后一个了，看来可以提前下班了。<br>王铭：哈哈是啊，幸亏老师限号。<br>（王锵推门而入）<br>王铭（抬头拿病历本，看到王锵的脸后非常惊讶）：你来看牙吗？<br>王锵（一脸阴沉）：嗯<br>陈医生（看到病历本上的名字）：噢你就是王铭的弟弟啊，坐下说吧，牙什么问题啊？<br>王锵（做到牙科椅上，一脸严肃）：陈医生您好，我大概四天前拔了一颗智齿，智齿当时用液氮速冻了的，现在想把它移植回去，您看可行吗？<br>（陈医生和王铭面面相觑）<br>王铭：啊？装回去？你在想些什么？<br>陈医生（示意王铭先不要说话，一脸疑惑）：为什么要装回去呢？还有怎么会想到用液氮冻……<br>王锵：液氮保存当时纯粹是为了好玩，我之前搞化学竞赛，可以用实验室的器材做这个。不过也是运气好，不然就没机会移植回去了。原因的话您不用管了，只要装回去就行了。<br>王铭（一脸着急）：怎么不用管？移植牙齿又贵又难，而且你拔掉智齿不就是因为空间不足太疼了吗，我真的想不出有任何理由要装回去。<br>陈医生：你还是说一下原因吧，这个手术不是小事。<br>王锵（犹豫了一会儿）：说出来可能令人难以置信，但却是事实。（停顿了一下，凝视着陈医生的眼睛）我拔掉这颗智齿之后，智力退回到三年前的水平，其他东西都记得，就是高中三年好像什么都没学一样。我确定是智齿造成的，马上就要高考了，要是不赶紧装回去，我就完了。<br>（王铭和陈医生再次面面相觑）<br>王铭：会不会是压力太大了啊……要不请假在家里休息几天再看看吧。<br>王锵（很不耐烦）：你以为我没考虑过这个吗，原本想着睡一觉就好了吧，但是现在都四天了！四天了！完全没有好转，我这几天就像高中新生一样从头开始学，高考只剩十天了！完全来不及！我没有乱猜，我拔智齿前还在想等会用液氮时具体要怎么操作，拔完之后就完全不知道了，只能找同学帮忙。一拔完就发现所有高中学的东西全忘了，哪有这么巧的？<br>王铭：你先别急，高考真的没这么重要，浙大很不错了吧，我现在不也还是个普普通通的医生。我高考考差的同学有些考上了公务员，有些去了互联网公司，待遇都比我好多了。<br>王锵（冷静下来）：之后的事之后再说，而且现在也没有其他办法了，不管怎样我都想试一试，如果还是不行，我就复读吧。<br>陈医生：那颗智齿你带来了吗？<br>王锵：还没，放在学校实验室，我想着先让你答应下来，然后我们约个时间。<br>陈医生：你让我看看你原来长智齿的地方。<br>（王锵张嘴，陈医生仔细检查）<br>陈医生：我以前只做过拔下来半小时之内的，你的智齿理论上应该也能移植，但是冷冻保存了四天，以及你的牙窝已经有点愈合了，成功率可能不是特别高，我可以帮你试试，但我建议你还是安心准备高考或者准备复读，不要对此报太大的希望。你看下周一这个时间有空吗？<br>王锵（欣喜）：可以的！陈医生愿意帮忙真是太好了。（严肃）不过，这件事情希望陈医生能够保密。<br>陈医生：嗯嗯，这我知道的，毕竟不是普通的事。<br>【王铭看着陈医生和弟弟，呆坐在桌边】</p><p>2，陈医生家 晚 内<br>【陈医生和妻子正在吃饭，突然陈医生的儿子陈震开门进来】<br>（陈医生和妻子低头继续吃饭，陈震自己盛饭坐定）<br>陈医生：怎么回来了，没钱啦？<br>陈震（沉默了一会儿）：我突然感觉很没意思。<br>陈医生：那你要怎样才有意思。<br>陈震：我是真的感觉花这么长时间打游戏很不值。我今天终于打到了最高段位，突然感觉很饿，网吧小哥又不在，只好自己出门吃汉堡王。吃汉堡的时候我也不知道怎么回事，突然回过神来，最高段位又如何，不过是一串虚拟的数字啊。<br>（陈医生和妻子像看外星人一样看着陈震，依旧难以置信）<br>妻子（试探）：那你接下来打算怎么办？<br>陈震：准备复读吧，我已经把我的游戏账号卖掉了。<br>妻子（惊喜）：你可记住你刚刚说的话啊，不要明天又照常了。<br>陈震：放心吧妈，我真的想通了<br>【陈医生依旧自顾自的吃饭】</p><p>3，陈医生家 晚 内<br>【陈医生和妻子躺在床上仰面聊天】<br>妻子：真想不到儿子居然有一天能想通，我还以为他没救了。<br>陈医生：别高兴的太早，多看几天吧。<br>妻子：也是，我也不太相信他就这么轻易的突然想通了。<br>陈医生：不过陈震就算不打游戏，也不是读书的料子，搞不好他复读到一半失去信心，又回去打游戏寻求安慰。<br>妻子：你要求怎么这么多，能不打游戏我已经谢天谢地了。<br>陈医生：唉，你是不知道我同事都怎么看我的。<br>妻子：怎么了？<br>陈医生：他们医术上比不过我，（苦笑）我这个儿子对他们来说是最大的安慰吧。<br>（妻子无言）<br>陈医生：要是他真想通了也是挺神奇的，我们这么多年，什么方法都试过了，竟然都敌不过一顿汉堡王。<br>妻子（笑）：他大概是突然感受到现实世界实实在在的小乐趣了。<br>陈医生：今天发生的怪事可真多。<br>妻子：嗯？还发生了什么？<br>陈医生（突然侧过身面对妻子）：我的实习生王铭有个几乎保送北大的弟弟你听说过吧，就是考上一本线就能上北大了。<br>妻子：知道啊，挺有名的，叫王锵吧。<br>陈医生：对，就是他。他今天来找我看牙，让我把他四天前拔的智齿安回去。他说拔了这颗智齿后，高中学的所有东西都不记得，就好像全都凝结在智齿上一样，你说奇不奇怪。<br>妻子（惊讶）：什么？这你也信？怎么可能啊，这孩子压力太大了吧。<br>陈医生：或许吧。<br>妻子：不过说到智齿，儿子刚刚跟我说他智齿大概也需要拔拔掉，疼了几天了，有空会直接去你单位找你的。<br>陈医生（若有所思）：这么巧啊……<br>妻子：有什么巧的，都是同龄人啊。<br>陈医生（回过神）：哦哦是啊。<br>妻子：那你跟王锵怎么说的，这孩子真奇怪。<br>陈医生：我刚开始也不信，但是我想，帮他装回去试试也行。<br>妻子（笑）：随便你吧。不过我觉得装回去不会有区别的，要是没用可不要怪罪给你。<br>陈医生（笑）：那不会的，这个孩子还蛮理智的（仿佛回忆着什么）他自己也只是想试试吧。<br>妻子（笑）：好了，睡觉吧。<br>【妻子睡觉，陈医生睁着眼睛若有所思】</p><p>4，教室门口 白 外<br>【老师拿着批到一半的作业本把王锵从教室叫出来，王锵紧张的出了门，同学们好奇的看着王锵和老师】<br>老师：王锵啊，北大给你一本线的优惠后，你的确睁半只眼就能上北大了，但是还是要注意一下学习态度。<br>王锵（低头）：嗯嗯。<br>老师：你最近的作业低级错误很多，而且还有很多空着不做，希望你最近注意一下。<br>王锵：嗯我以后会注意的。<br>老师（叹气）：即便这么大的优惠也是有风险的，我建议你还是当做没有这个优惠照常学习。<br>王锵（似乎有难言之隐）：……嗯好的。<br>老师（犹豫了一下）：以及我这样说可能会给你点压力，这个优惠的名额你也知道，是每个高中分配的，你的高考成绩会影响到明年的名额分配，从为学弟学妹着想的角度，还是希望你裸分也考到录取线。<br>王锵（神色凝重）：……嗯好，我会加油的。<br>老师（笑，拍拍王锵）：你向来最让老师放心，好了，回去上课吧。<br>【王锵神色凝重的回到教室，同学们窃窃私语】</p><p>5，省口腔医院 白 内<br>【陈医生正在给一位患者看牙，连续几个患者张嘴后陈医生都露出了失望的表情，直到一个患者张嘴，陈医生舒了一口气】<br>陈医生（敲敲患者的一颗牙齿）：你这颗智齿有什么难受的吗？<br>患者：没有啊。<br>陈医生：以后会越来越难受的，已经磨损到口腔黏膜了。<br>患者：啊？我同学倒是蛮多需要拔的。但是听说不难受就不用拔。<br>陈医生：现在不难受而已，以后会疼的厉害，建议尽早拔掉。<br>患者：哦哦这样，（犹豫了一会儿）我也不赶时间，那就今天拔掉吧。陈医生果然名不虚传，其他医生应该都看不出来需要拔吧。<br>（陈医生讪讪地笑了一下，然后熟练的操作帮患者打麻药，拔下智齿）<br>陈医生：你先这样躺着止会血再走，这样比较好。<br>（患者感激地点头，陈医生随即用镊子夹起智齿离开，过了一段时间回来，口袋里鼓鼓的，像是放了一个小瓶子）<br>陈医生：差不多了，回去再止一会儿，这几天注意饮食和伤口的清洁。<br>【患者起身捂着嘴点头离开】</p><p>6，省口腔医院 白 内<br>【陈医生掏出手机打电话】<br>陈医生：喂？小震啊，你下午六点过来拔智齿可以吗？<br>……<br>陈医生：当然是越早拔越好啦。<br>……<br>陈医生：这个没事的，我会帮你跟老师请假的。<br>……<br>陈医生：好的，那你尽量准时到，早了也是要等上一个病人的。<br>……<br>陈医生：那就这样，别忘了啊。<br>【陈医生走回诊室，若有所思】</p><p>7，省口腔医院 白 内<br>【王锵和王铭一起走进来，陈医生抬头看到他们有点惊讶】<br>陈医生：王铭你今天不是休息吗？<br>王铭：我陪我弟弟呀。<br>陈医生（紧张，下意识的遮挡口袋凸起的地方）：哦哦对呀，我给忘了。<br>（王锵拿出一个小瓶子递给陈医生）<br>王锵（紧张）：您看还有希望移植回去吗，应该没问题吧？<br>陈医生（拿着瓶子观察）：这样看看不大出来，这是刚刚从-80度环境里拿出来的吗。<br>王锵：是的，一拿出来就马上过来了，才隔了十分钟吧。<br>陈医生：那要尽快，我先去做一下恢复处理吧。<br>王锵：好。<br>【陈医生拿着王锵的智齿离开，王铭跟了上去】</p><p>8，省口腔医院实验室 白 内<br>【陈医生进实验室把装着王锵智齿的瓶子放到桌上，正要把口袋里的瓶子拿出来，王铭就跟了进来，陈医生赶紧塞了回去，但还露出一小截，只能用手臂遮掩】<br>陈医生（强作镇定）：怎么了吗？<br>王铭：我看看有没有需要帮老师的。<br>陈医生（干笑，转身面对架子背对王铭，左手假装找试剂，右手趁机调整口袋中瓶子的位置）：这个操作不复杂啊，你去陪你弟弟吧，我看他挺紧张的。<br>王铭（走上前，用身体挡住桌上装着王锵智齿的瓶子）：其实我也挺紧张的，您看装上的成功率有多大（从口袋里拿出一个一模一样的装了一颗智齿的瓶子放到身后的桌上，并把装着王锵智齿的瓶子放入口袋）<br>陈医生（紧张）：这个很难说……实验室里有些东西比较重要，你还是先出去吧。<br>王铭：哦哦不好意思，那我出去了。<br>陈医生（表情有些舒缓）：嗯嗯。<br>【王铭推门出去，陈医生如释重负】</p><p>9，省口腔医院 白 内<br>【王锵和王铭两个人看起来都非常焦虑，陈医生将处理好的智齿放在一个容器中拿了过来】<br>陈医生：还是有活性的，成功率应该挺高的。<br>（王锵露出了欣喜的神情，王铭也露出了欣喜的表情）<br>王锵（舒了一口气）：那开始吧。<br>（王铭突然拿出手机，手机上显示收到一条信息：搞定了吗。王铭回复：搞定了，钱准备好了吗。消息回复：ok的。）<br>王铭：突然有个急事，好像不能陪王锵了。<br>王锵：没事，你忙你的。<br>王铭：那我先走了，祝成功哈~ 王锵（躺上牙医椅）：嗯嗯。<br>【王铭急匆匆离开了就诊室，陈医生开始给王锵做移植】</p><p>10，省口腔医院 白 内<br>【移植术结束后】<br>陈医生：好了，还是蛮成功的，不过还是要过几天再观察是不是真的成功了。你现在感觉有什么变化吗？<br>王锵（仔细思索了一下）：好像没有。<br>陈医生：别急，可能只是现在没长好，再等几天吧，再不行你就安心学习吧，不要再想智齿了。<br>王锵（失落）：嗯。<br>【王锵离开后，陈震走进了诊室，陈医生熟练的操作，拔掉了陈震的智齿】<br>陈医生：躺着止血吧，后面也没其他病人了。<br>（陈震点头，一刻钟后，陈医生将药棉拿掉看了看，随后再次拿起工具）<br>陈医生：这个地方最好还是要填充一些东西的，我帮你弄弄好。<br>（陈震露出了疑惑的神情，但还是让父亲操作）</p><p>11，王锵家 晚 内<br>【夜里十一点，王锵坐在家中看书，神情看上去烦躁不安，额头渗出了汗珠】</p><p>12，陈医生家 晚 内<br>【陈医生躺在床上辗转难眠】</p>"},{"title":"App的icon颜色跟App类别的关系","path":"2018/10/23/AppIcon/","permalink":"https://jinnm.github.io/2018/10/23/AppIcon/","content":"<p>手机里的app有一百多个吧，不太喜欢用ios的app文件夹，觉得有点难看，所以一般用页来分类，每个类别一页或者几个类别一起拼成一页。于是就很容易发现购物那一页全线飘红（无视下面的视频类）。<br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fwigq93nyxj30hs0vk4qp.jpg\" alt><br>很容易想到这不是偶然，大家都心知肚明暖色可以激发人买买买的欲望。那么其他app呢？微信是绿色的，支付宝是蓝色的，网易云音乐是红色的，这些颜色是如何选择的？这几个app的颜色选择可能有一定的偶然性，但是一个类别比如购物类有明显暖色倾向的话，颜色的选择就不是偶然了，那么除了购物类之外其他类别有没有颜色倾向呢？<br>碰巧会爬虫也会opencv，刚好也知道描述视觉感觉的话可以用Lab空间计算距离……既然已经想到这一步了就来做一下吧！</p><p>大致思路就是</p><ul><li>把App Store上的app图标按类别爬下来</li><li>选择常见的几种颜色比如红、绿、蓝、黄、品红、青作为标准色</li><li>用OpenCV分析一下图片的颜色，转换到Lab空间，计算出到哪个标准色距离最短</li><li>把结果可视化方便得出结论</li></ul><h3 id=\"爬取图片\"><a href=\"#爬取图片\" class=\"headerlink\" title=\"爬取图片\"></a>爬取图片</h3><p>以下是代码，加了非常详细的注释，App Store的网站非常友好哈哈哈</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># coding:utf8</span><br><span class=\"line\">import requests</span><br><span class=\"line\">from bs4 import BeautifulSoup</span><br><span class=\"line\"></span><br><span class=\"line\"># 浏览器请求头（大部分网站没有这个请求头会报错）</span><br><span class=\"line\">headers = &#123;&apos;User-Agent&apos;: &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1&quot;&#125;</span><br><span class=\"line\">all_url = &apos;http://itunes.apple.com/cn/genre/ios-%E5%9B%BE%E4%B9%A6/id6018?mt=8&apos;  # 开始的URL地址</span><br><span class=\"line\">start_html = requests.get(all_url, headers=headers)      # 加了头的地址</span><br><span class=\"line\">Soup = BeautifulSoup(start_html.text, &apos;lxml&apos;)            # 解析HTML</span><br><span class=\"line\"></span><br><span class=\"line\"># 找到类别列表 &lt;div id=&quot;genre-nav&quot; class=&quot;nav&quot;&gt;</span><br><span class=\"line\">all_lei = Soup.find(&apos;div&apos;, class_=&apos;nav&apos;).find_all(&apos;a&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">for lei in all_lei:          # 取一个类别</span><br><span class=\"line\">    lei_url = lei[&apos;href&apos;]    # 取该类别的链接</span><br><span class=\"line\">    lei_html = requests.get(lei_url, headers=headers)    # 加了头的地址</span><br><span class=\"line\">    lei_soup = BeautifulSoup(lei_html.text, &apos;lxml&apos;)      # 解析HTML</span><br><span class=\"line\"></span><br><span class=\"line\">    # 找到类别网址里的app排行榜 &lt;div id=&quot;selectedcontent&quot; class=&quot;grid3-column&quot;&gt;</span><br><span class=\"line\">    all_app = lei_soup.find(&apos;div&apos;, class_=&apos;grid3-column&apos;).find_all(&apos;a&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">    f = open(&apos;图书&apos;+&apos;.txt&apos;, &apos;w&apos;)   # 以类别名称命名txt</span><br><span class=\"line\">    for a in all_app:             # 取出app排行榜中的一个app</span><br><span class=\"line\">        title = a.get_text()  # 取类别名称</span><br><span class=\"line\">        print(title)</span><br><span class=\"line\">        app_url = a[&apos;href&apos;]       # 取出该app的链接</span><br><span class=\"line\">        app_html = requests.get(app_url, headers=headers)     # 加了头的地址</span><br><span class=\"line\">        app_soup = BeautifulSoup(app_html.text, &apos;lxml&apos;)       # 解析HTML</span><br><span class=\"line\"></span><br><span class=\"line\">        # 找到app页面中的icon &lt;div class=&quot;product-hero__media l-column small-5 medium-4 large-3 small-valign-top&quot;&gt;</span><br><span class=\"line\">        icon = app_soup.find(&apos;div&apos;,class_=&apos;product-hero__media l-column small-5 medium-4 large-3 small-valign-top&apos;).find_all(&apos;img&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">        for img in icon:</span><br><span class=\"line\">            src = img[&apos;src&apos;]</span><br><span class=\"line\">            print(src)</span><br><span class=\"line\">            f.write(src + &apos;\\n&apos;)    # 将icon地址写到以类别命名的txt文件中</span><br><span class=\"line\">    f.close()</span><br><span class=\"line\">    # 得到一个以某个类别命名的txt文件 里面有该类别240个app的icon的地址</span><br><span class=\"line\"># 得到所有类别的txt</span><br></pre></td></tr></table></figure><p>爬完之后就得到了每个类别前240个icon图片的链接，用下载器下载下来就搞定了</p><h3 id=\"分析颜色\"><a href=\"#分析颜色\" class=\"headerlink\" title=\"分析颜色\"></a>分析颜色</h3><h5 id=\"批量读取图片\"><a href=\"#批量读取图片\" class=\"headerlink\" title=\"批量读取图片\"></a>批量读取图片</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">width = 246</span><br><span class=\"line\">height = 246</span><br><span class=\"line\">size = height * width   # icon尺寸</span><br><span class=\"line\">path = &apos;/Users/Jinnm/Desktop/pic/&apos;</span><br><span class=\"line\">dirs = os.listdir(path)         # 导入该路径中的所有文件名</span><br></pre></td></tr></table></figure><h5 id=\"颜色空间转换\"><a href=\"#颜色空间转换\" class=\"headerlink\" title=\"颜色空间转换\"></a>颜色空间转换</h5><p>图片里每个像素转换</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i in dirs:</span><br><span class=\"line\">    img = cv2.imread(path + i, cv2.IMREAD_COLOR) # 导入文件</span><br><span class=\"line\">    img2 = []</span><br><span class=\"line\">    for j in range(0, width):</span><br><span class=\"line\">        for k in range(0, height):</span><br><span class=\"line\">            # 存储每个像素点的lab值, trans为转换函数</span><br><span class=\"line\">            img2.append(trans(img[i][j][2], img[i][j][1], img[i][j][0]))</span><br></pre></td></tr></table></figure><p>标准颜色的转换</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 设定标准的13种颜色的rgb值</span><br><span class=\"line\">rule = [[255, 0, 0], [255, 147, 0], [255, 255, 0], [0, 255, 0], [0, 255, 255], [0, 0, 255], [148, 32, 146], [255, 64, 255], [171, 69, 0], [171, 121, 66], [165, 165, 165], [0, 0, 0], [255, 255, 255]];</span><br><span class=\"line\">rule2 = [];</span><br><span class=\"line\"># 储存13种颜色的lab值</span><br><span class=\"line\">for i in range(0, 13):</span><br><span class=\"line\">    rule2.append(trans(rule[i][0], rule[i][1], rule[i][2]));</span><br></pre></td></tr></table></figure><p>转换函数（依照rgb转lab公式)</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def trans(r,g,b): #根据公式把rgb数据转到lab</span><br><span class=\"line\">    def calV(V):</span><br><span class=\"line\">        if V &lt;= 0.04045:</span><br><span class=\"line\">            return V / 12.92</span><br><span class=\"line\">        else:</span><br><span class=\"line\">            return ((V + 0.055) / 1.055) ** 2.4</span><br><span class=\"line\">    def calXYZ(R, G, B):</span><br><span class=\"line\">        sR = calV(R / 255.0)</span><br><span class=\"line\">        sG = calV(G / 255.0)</span><br><span class=\"line\">        sB = calV(B / 255.0)</span><br><span class=\"line\">        x = 100 * (0.4124564 * sR + 0.3575761 * sG + 0.1804375 * sB)</span><br><span class=\"line\">        y = 100 * (0.2126729 * sR + 0.7151522 * sG + 0.0721750 * sB)</span><br><span class=\"line\">        z = 100 * (0.0193339 * sR + 0.1191920 * sG + 0.9503041 * sB)</span><br><span class=\"line\">        return [x, y, z]</span><br><span class=\"line\">    def f(t):</span><br><span class=\"line\">        if t &gt; ((6.0 / 29) ** 3):</span><br><span class=\"line\">            return t ** (1.0 / 3)</span><br><span class=\"line\">        else:</span><br><span class=\"line\">            return 1.0 / 3 * 29 * 29 / 6 / 6 * t + 16.0 / 116</span><br><span class=\"line\">    def calLab(X, Y, Z):</span><br><span class=\"line\">        X_n = 94.813</span><br><span class=\"line\">        Y_n = 100.000</span><br><span class=\"line\">        Z_n = 107.262</span><br><span class=\"line\">        L = 116 * f(Y / Y_n) - 16</span><br><span class=\"line\">        a = 500 * (f(X / X_n) - f(Y / Y_n))</span><br><span class=\"line\">        b = 200 * (f(Y / Y_n) - f(Z / Z_n))</span><br><span class=\"line\">        return [L, a, b]</span><br><span class=\"line\">    R = int(r)</span><br><span class=\"line\">    G = int(g)</span><br><span class=\"line\">    B = int(b)</span><br><span class=\"line\">    [x, y, z] = calXYZ(R, G, B)</span><br><span class=\"line\">    [L, a, b] = calLab(x, y, z)</span><br><span class=\"line\">    return [L, a, b]</span><br></pre></td></tr></table></figure><h5 id=\"量化图片颜色\"><a href=\"#量化图片颜色\" class=\"headerlink\" title=\"量化图片颜色\"></a>量化图片颜色</h5><p>计算在lab颜色空间中与标准色的距离，将每个像素点量化到距离最小的标准色，并记录一张图片中各个标准色的像素数量</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i in range(0, width * height):</span><br><span class=\"line\">    dist = []</span><br><span class=\"line\">    for j in range(0, 13):</span><br><span class=\"line\">        # 记录下像素点与13种颜色在lab颜色空间中的距离</span><br><span class=\"line\">        dist.append( (img2[i][0] - rule2[j][0]) ** 2 + (img2[i][1] - rule2[j][1]) ** 2 + ( img2[i][2] - rule2[j][2]) ** 2)</span><br><span class=\"line\">        num = [0] * 13</span><br><span class=\"line\">        pos = dist.index(min(dist)) # 读取距离最小的颜色序号作为该像素点的代表 </span><br><span class=\"line\">        num[pos] += 1               # 一张图中所有像素点的代表颜色的数量统计</span><br></pre></td></tr></table></figure><h5 id=\"保存结果\"><a href=\"#保存结果\" class=\"headerlink\" title=\"保存结果\"></a>保存结果</h5><p>将结果保存到exel</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import xlwt</span><br><span class=\"line\">book = xlwt.Workbook(encoding=&apos;utf-8&apos;);</span><br><span class=\"line\">sheet =book.add_sheet(&apos;test&apos;); # 建立存储数据的excel表</span><br><span class=\"line\">flag = 0;</span><br><span class=\"line\">for j in range(0, 13):</span><br><span class=\"line\">    sheet.write(flag, j, label=num[j]); # 把统计数据写入excel表中</span><br><span class=\"line\">    flag += 1;</span><br><span class=\"line\">book.save(&apos;/Users/Jinnm/Desktop/result.xls&apos;); # 保存excel表</span><br></pre></td></tr></table></figure><p>结果大概是这个样子（13列是13种颜色）<br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fwj4k4sfcwj31ay0nuaec.jpg\" alt></p><h3 id=\"可视化结果\"><a href=\"#可视化结果\" class=\"headerlink\" title=\"可视化结果\"></a>可视化结果</h3><p>刚好下个学期有可视化的课程，打算学习之后处理一下这个结果，目前先用最最普通的柱状图表示<br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fwja78q07vj31fo3y94qp.jpg\" alt></p><h3 id=\"结果分析\"><a href=\"#结果分析\" class=\"headerlink\" title=\"结果分析\"></a>结果分析</h3><p>对结果的柱状图进行初步的分析。<br>发现结果跟自己预想的不太一样哈哈，原本感觉购物暖色，社交冷色，结果社交类中暖色的比例也非常高。</p><h5 id=\"总体\"><a href=\"#总体\" class=\"headerlink\" title=\"总体\"></a>总体</h5><p><strong>现象一：白色在所有大类中均占最高的比例</strong><br>猜测原因：<br>大部分icon喜欢采用白底+logo的配置，由于logo在icon中占的像素数少，导致大量的icon被归类于白色主色调。<br>至于为什么都喜欢采用白底，猜测是因为</p><ul><li>白色的icon背景带来更好的融合性和统一性，以ios系统为例，自带的系列图标很多都是这个形式，那么第三方也采用这个形式会使界面比较统一协调。</li><li>白色可以为用户提供清新干净的视觉体验，去掉不必要的视觉干扰，从而更集中于logo。而五彩斑斓的杂色的图标往往容易让人有嘈杂的眩晕感。</li><li>由于颜色带来的视觉效果是互相影响的，而白色一般不影响其他颜色观感，是一个非常好的“搭色”。</li></ul><p><strong>现象二：暖色在统计数据中比重较高</strong><br>猜测原因：<br>现在每个用户都有大量app排列在手机中，暖色相较于冷色往往更为显眼，用红色与黄色作为icon的主颜色会使该icon更为醒目，从而增加用户的点击使用率。</p><p><strong>现象三：配色选取大多数少于3种</strong><br>这一块目前通过这个柱状图是看不出来的，但是观察exel的表格可以发现，一个icon在很多颜色上的像素数都是0或是数值很小，数值明显特别大的颜色一般在三种以内。另一方面也说明了目前这种数据可视化的方式有很多不足。<br>猜测原因：<br>icon是一个很小的图标，简洁的图案和配色会比较适合这种小区域猜测，清晰而又令人印象深刻。而且再观察之后可以发现，多种颜色一般是相近的颜色。采取色相接近的配色方案主要是为了使得icon整体观感统一和谐。</p><h5 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h5><p>在红色白色总体占比大的情况下，单纯的看一个类别的柱状图，那每一个类别都是红色白色是主要颜色了……所以分类的分析采用横向对比的方法，观察相对其他类别而言，哪些颜色比较突出，哪些颜色显得特别少。这一方面的分析目前的柱状图也很不合适，而且每张图的纵坐标比例是不一样的，所以不能直接比较高度……</p><p><strong>种类：摄影</strong><br>现象：<br>黑白两色的比例极高，彩色运用明显比较少，但在相对运用比较少的彩色中红色占比还是比较大的。<br>猜测原因：<br>多数的摄影app喜欢标榜个性，追求性冷淡的高端简洁风。除去这一些以外的摄影app往往是针对女性用户群的，故多用女性更偏好的红粉色调。</p><p><strong>种类：商务</strong><br>现象：<br>绿、青、蓝、紫的比例较高<br>猜测原因：<br>这一类冷色调的颜色往往给用户以平和安稳的感觉，会让用户更倾向去信赖。而且这些冷色调是没有性别偏好的颜色，男女中都有大量的用户群偏好这种颜色，所以这是一个非常容易使用户产生好感的颜色。</p><p><strong>种类：社交</strong><br>现象：<br>白色的比例较低<br>猜测原因：<br>大部分的社交软件更倾向于用彩底突出吸引力。而且相较于白底的平淡无奇，彩底更能使得这些社交软件显得活泼生动而愉悦，营造更为轻松的氛围。</p><p><strong>种类：购物</strong><br>现象：<br>红色比例极高<br>猜测原因：<br>红色等暖色可以给用户一种视觉上的刺激感，在使icon更具冲击力的同时，也某种程度上促进了用户的购买欲，从而促进快速消费。这也是为什么大多数快餐店会选择这类冲击性大的暖色。</p><h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>结果还是和自己平时的感受有挺多不一样的，看来数据是王道哈哈哈。目前最大的不足就是数据可视化，不合适的可视化使得直观地看出规律变得非常困难。</p>"},{"title":"设计 || 分答模式的设计与启发","path":"2018/10/16/design2/","permalink":"https://jinnm.github.io/2018/10/16/design2/","content":"<h3 id=\"分答的设计\"><a href=\"#分答的设计\" class=\"headerlink\" title=\"分答的设计\"></a>分答的设计</h3><ul><li>回答者：回答自己愿意回答的问题，获得 90% 问题酬劳以及所有偷听者每人 0.5 元偷听费；</li><li>提问者：提出问题，付出问题酬金（如果回答者没回答则不收取费用），获得所有偷听者每人 0.5 元偷听费；</li><li>偷听者：听自己感兴趣的内容，每次给出 1 元偷听费；</li><li>分答平台：从提问者的酬金当中收取 10%。</li></ul><h3 id=\"造成的结果\"><a href=\"#造成的结果\" class=\"headerlink\" title=\"造成的结果\"></a>造成的结果</h3><ul><li>回答者：使得自己所知道的信息成功变现</li><li>提问者：得到了想要的答案，同时，如果提了一个答主愿意回答，又有很多人感兴趣的问题，有机会赚取比酬金更高的偷听费</li><li>偷听者：用极低的成本得到了感兴趣的信息</li><li>分答平台：赚取抽成</li></ul><p>好的平台规则就是使得大家都觉得自己赚了。分答初期非常火爆，是当时的现象级产品。但在分答的平台中，回答者是靠明星撑起来的（初期用王思聪等引流），而对明星来说，在分答的收益并不值得一提，明星对分答的新鲜感消退以及合约任务完成后，这个模式就失去了活力。但是明星在这里是一种特殊情况，在回答者这一环维持住时，分答的火爆表明了这个模式还是值得借鉴的。</p><h3 id=\"启发\"><a href=\"#启发\" class=\"headerlink\" title=\"启发\"></a>启发</h3><h5 id=\"把用户分成两类，并使他们互相影响\"><a href=\"#把用户分成两类，并使他们互相影响\" class=\"headerlink\" title=\"把用户分成两类，并使他们互相影响\"></a>把用户分成两类，并使他们互相影响</h5><p>分答模式的关键在于把付费用户分成两类，一类是有兴趣但不愿投入太多的吃瓜群众（偷听者），一类是有资本也有野心的高付费者（提问者）。而且分别对这两类用户提供不同的模式甚至在他们之中建立连接。</p><p>分成两类人群，一方面对于不同的人群使用不同的模式会更有针对性，另外一方面分成两类后，两类人的心理会互相影响。比如就是由于高付费者的存在，吃瓜群众才能感受到自己占了便宜。而吃瓜群众的存在也会让高付费者有一些心理不平衡，想要在付费后将利益最大化的欲望会更加强烈。</p><p>可以试图模仿一下这个模式。比如一个王者荣耀皮肤，定略高一些的价格，300元一个，除了购买者外的其他玩家可以在开售半个月后以1元每小时的价格租用这个皮肤（租用数量可以做个限定），皮肤拥有者们有资格平分他们使用该皮肤游戏期间所获得的租金收入的80%，另外20%给游戏制作方。比如某天19：00到20：00，有10个购买者使用该皮肤游戏，限定租用额为使用玩家的100倍，租用额满的话就是1000个玩家选择租用，那么这一个小时内，每个租用者花费1元，每个购买者可以获得80元，平台获得200元。</p><p>在这种情况下：</p><ul><li>购买者：相比普通玩家提前半个月体验+之后可以获得收入</li><li>租用者：用低廉的价格体验了只想短期使用的皮肤</li><li>平台：使得付费用户的比例提高，同时增加用户尤其是购买者的粘性。由于租用额的限定，会使得冷门游戏时间用户数增多。细调规则的具体数值可能会使总收入增加。</li></ul><h5 id=\"规则比普通情况下稍微复杂一点点\"><a href=\"#规则比普通情况下稍微复杂一点点\" class=\"headerlink\" title=\"规则比普通情况下稍微复杂一点点\"></a>规则比普通情况下稍微复杂一点点</h5><p>这样就产生一种好像能够运用智慧褥羊毛的错觉，会激发用户参与的兴趣，但是过于复杂就会适得其反，比如规则越来越复杂的双十一活动（虽然因此赶走了许多用户，但是按照复杂规则获得优惠的用户会非常非常珍惜这点优惠，一般会买足够多的东西来达到优惠条件……总的来说可能还是成功的）。</p><p>例子可以参考上一条，用户一旦开始考虑是购买者合算还是租用者合算，就差不多是付费用户的一员了，无论他最终选择哪一个。</p>"},{"title":"摄影 || 胶片初体验","path":"2018/10/15/photo1/","permalink":"https://jinnm.github.io/2018/10/15/photo1/","content":"<p>之前用数码相机拍照时一个场景拍完总觉得不满意，接着会拍好几张（毕竟数码相机多拍几张不心疼），后期选时又选不出来（最后发现都差不多，人生一大错觉：第一张拍的不好只是失误，多拍几张会发现自己就是这个水平hhh）。再加上票圈一个胶片机玩家晒的照片颜色实在太太太好看了（虽然数码也能调但是越来越懒于后期了……），于是决定体验胶片机！</p><p>目前用一个傻瓜机和奥林巴斯om1分别拍了两卷，原本是三卷，其中一卷没挂上，被告知空白卷……另外还碰到了很多很窒息的事，比如测光不准，很多照片欠曝等等，还有许多奇奇怪怪的车祸照片，能拯救的都尽量拯救了一下……</p><p>几乎不需要后期的感觉很爽，当然比起数码相机会有很多遗憾，奇妙的感觉。</p><p>下面就是照片啦~两卷混在一起了，除了过于车祸的全放上来了<br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fw8vfkewh2j31kw11vhdw.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fw8vgc67psj31kw11vkjn.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fw8vqa2kqkj31kw11vqv6.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fw8vg2llnxj31kw11v4qr.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fw8vftl4pcj31kw11vx6r.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fw8vfp183jj31kw11vx6r.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fw8vq0gky4j31kw11v4qs.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fw8vp93iz0j31kw11v1l0.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fw8vp02ag2j31kw11vqv7.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fw8voql97cj31kw11vqv7.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fw8vom07fnj31kw11vnpf.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fw8vfysekbj31kw11ue84.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fw8vff54t1j31kw11ukjo.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fw8vh0pk61j31kw11ux6s.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fw8vgva9nzj31kw11uhdz.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fw8vgniku5j31kw11u4qt.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fw8vgho3nmj31kw11uu10.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fw8vg7t3uhj31kw11uhdw.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fw8vhatsa5j31kw11uhdw.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fw8vh655puj31kw11u4qt.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fw8vq6ff86j31kw11u1l1.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fw8vpv9qiqj31kw11u7wk.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fw8vpq22dzj31kw11ux6s.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fw8vpkfkspj31kw11ux6q.jpg\" alt><br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwly1fw8vpgt197j31kw11u7wm.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fw8vp4d3sgj31kw11unpf.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fw8vov7kq0j31kw11uqv7.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fw8voh9s0oj31kw11uu10.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fw8vobmox4j31kw11u7wk.jpg\" alt></p>"},{"title":"影评 || 情书，关于死亡","path":"2018/10/05/movie1/","permalink":"https://jinnm.github.io/2018/10/05/movie1/","content":"<p>国庆回家路上无聊，想随便挑一部电影看，想到岩井俊二+陈可辛+周迅的新电影《你好，之华》快上映了，便打算再看一遍《情书》，反正它在我的记忆中也非常模糊了，只记得大致情节和开场中山美惠在雪地里经典的一抬头。（其实之前对于秋叶烧制玻璃时油腻的样子印象也蛮深刻的）<br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fwxkni5mx7j30go0goq4k.jpg\" alt></p><p>《情书》的剧情大概是这样：日本神户某个飘雪的冬日，渡边博子在前未婚夫藤井树的三周年祭日上又一次悲痛到不能自已。正因为无法抑制住对已逝恋人的思念，渡边博子在其中学同学录里发现“藤井树” 在小樽市读书时的地址时，依循着寄发了一封本以为是发往天国的情书。不想不久渡边博子竟然收到署名为“藤井树”的回信，经过进一步了解，她知晓此藤井树是一个同她年纪相仿的女孩，且还是男友藤井树少年时代的同班同学。为了多了解一些昔日恋人在中学时代的情况，渡边博子开始与女性藤井树书信往来。而藤井树在不断的回忆中，渐渐发现少年时代与她同名同姓的那个藤井树曾对自己藏了一腔柔情……而当博子去拜访女性藤井树时，发现自己与她的样貌非常相似，不禁陷入更深的痛苦。男性藤井树的好友秋叶如今是博子的现男友，则因为博子的念念不忘感到懊恼。</p><p>另外，电影中比起小说增加了这样的情节：女性藤井树一直处在感冒状态，而她的父亲就是伤寒去世的，电影结尾女性藤井树终于高烧病倒，命悬一线，而此时却偏偏碰到了暴雪，救护车难以赶到，这个状况和她父亲当年的情况如出一辙，但女主的爷爷和妈妈这次成功救回了亲人。</p><p>第一次看这部电影大概是高一的时候，那个时候的我特别喜欢看口碑大片或是烧脑电影，口碑大片比如肖申克的救赎，阿甘正传，霸王别姬等等，基本高分电影和比较有名的九十年代以来的奥斯卡最佳影片都看过。烧脑电影比如诺兰的几部电影，穆赫兰道等等，我惊叹于它们构思的精巧并沉迷其中……总之对于《情书》这种小清新的情情爱爱的电影是不屑的（不过现在已经能被各种类型的电影所打动了，除了恐怖片……）</p><p>我会想到看这部电影的契机是某次很闲的夜自习，偶然在杂志上看到了小说《情书》的选段，选段的开始，博子已经明白了这个跟她通信的藤井树是跟她男友同名同姓的高中同学，于是希望藤井树给她讲一讲博子男友高中时期的故事。通过来回的书信，两个同名同姓少年的故事徐徐展开……整体的感觉就是很舒服，而且故事的设计也相当巧妙（这是当时比较戳我的原因，感觉它是非常特别的“言情小说”），由于我并没有从两个藤井树的故事中感觉到情愫，所以我看到结尾的时候还是蛮惊讶的，于是就更加打动我了（噗……）。当天晚上便找了情书的全文看，然而感到非常失望！！因为我发现我之前看的选段就是最精彩甚至可以说是唯一出彩的一部分。但是还是趁热打铁看了电影。</p><p>第一次看完这部电影的想法是：博子好惨，男友去世了不说还发现男友跟自己在一起好像是因为她跟他的暗恋对象长得像；秋叶好惨，女友对前男友念念不忘，而且她前男友还是他好朋友，他无论怎么做都很尴尬；男性藤井树也好惨，默默喜欢藤井树这么久，之后还因为事故英年早逝……所以我当时对于这部电影的印象是：就是一部情爱电影啊，不过构思精巧了些。</p><p>然而今年国庆再看时却发现，这是一部讲死亡的电影。书信的往来，藤井树与藤井树的感情，博子秋叶藤井三人的感情纠葛，似乎都只是“配角”。电影中有大量片段描述着主角们与“死亡”的纠葛，探讨着死亡对于留世之人的巨大影响。尤其是比起原著，电影增加了女性藤井树的家庭故事，进一步给死亡的主题增加可探讨的内容。</p><p>博子对于藤井树的死亡。<br>秋叶对于藤井树的死亡。<br>藤井树对于藤井树的死亡。<br>藤井树对于父亲的死亡。<br>藤井树的妈妈和爷爷对于她父亲的死亡。<br>藤井树的妈妈和爷爷对于濒临死亡藤井树。</p><p>博子对于死去的藤井树，刚开始只是失去爱人的痛，后来和秋叶一起后，还多了一份愧疚，再后来知道女性藤井树之后，又多了一份埋怨和不甘。</p><p>秋叶对于死去的藤井树，有失去挚友的痛，但也庆幸有机会和博子在一起了，但对于自己的庆幸又感到自责，同时因为博子对已经死去的藤井树依然念念不忘感到懊恼。</p><p>女性藤井树得知藤井树因为事故去世时，已经渐渐回忆起他们高中时的故事，对于他的去世，不仅仅只是遗憾于一位高中同学的去世。</p><p>藤井树父亲的死亡于她，是一个模糊的心结。父亲去世时她似乎还很小，懵懵懂懂的父亲就去世了，葬礼时也远没有妈妈和爷爷这么痛苦。藤井树当时去她家还书，问她为什么请假时，她轻松地回答是葬礼。但她多年后去医院仍然会回忆起那天夜里送父亲进医院的情景，这种伤痛是一种隐隐但却绵长的伤痛。</p><p>而藤井树的妈妈和爷爷，经历了两次暴雪之夜亲人病危的情况。第一次碰到时，妈妈主张按医院说的，在家给病人做暂时性的处理，等待救护车的到来，而爷爷则执意背儿子去医院，最后虽然成功送到了医院，但是一个人失去了丈夫，一个人失去了独子。当第二次碰到时，妈妈更加坚定等救护车的到来，表示给病人保暖才是重要的，爷爷依旧执意要背去医院，确信这次他跑过去，可以花比救护车更短的时间，最后妈妈选择了爷爷的方式，虽然爷爷比不上十几年前的自己，但似乎是凭着对儿子的愧疚，拼力将藤井树送到了医院……最后一个人保住了自己的女儿，一个人保住了自己的孙女。这里还有一个小故事，之前妈妈不顾爷爷反对，打算卖掉三人相依为命的老房子搬到现代的公寓，并找了藤井树的姑父做中介，姑父听说藤井树父亲的去世死因是伤寒之后表示自己完全忘了，而且因为伤寒这个死因哈哈大笑……此处也是生之人对死之人的一处描写。而在那个藤井树病危的夜晚之后，妈妈突然表示听从爷爷的心愿，不搬家了。</p><p>生者受死者的影响，但是生者最后释怀了，这才能使一部电影结局。</p><p>从藤井树的父亲到藤井树，妈妈和爷爷一次输给了死神，一次赢了死神。从藤井树病危那一晚的情况来看，虽然在藤井树父亲死后，妈妈和爷爷都没有正面提起这件事，但是两人从来都没能释怀，都对那一晚他们是否做了正确的选择，是否是因为自己的选择害死了藤井树的父亲，而耿耿于怀了十几年。但第二次赢了死神之后，这种状况得到了很大的改善，妈妈和爷爷更加平和地看待藤井树父亲的死亡，也更加真诚地互相理解和体谅。这是一种对死亡的释怀。</p><p>而另一种，是博子和秋叶的。藤井树去世之后的三年来都是他们生活中沉重的阴影，所幸秋叶是个洒脱之人，他最后带博子去了藤井树出事的雪山，带着博子向那座雪山问候。“你好吗？”“我很好”“你好吗？”“我过的很好”。博子声嘶力竭的喊着，脸上挂着泪和笑意，秋叶在背后看着博子，感到宽慰。这一刻，他们挣脱了藤井树的死亡所带来的阴影。</p><p>我还没有经历过任何死亡，但这部电影关于死亡的描述却给了我如此深刻的感受，我想这就是为什么有人说，“电影使人生延长了三倍”吧。</p>"},{"title":"RealTimeRendering Ch.2","path":"2018/09/24/RealTimeRendering2/","permalink":"https://jinnm.github.io/2018/09/24/RealTimeRendering2/","content":"<h3 id=\"Architecture\"><a href=\"#Architecture\" class=\"headerlink\" title=\"Architecture\"></a>Architecture</h3><p>The speed of the pipelines is determined by the speed of the slowest stage called <strong>bottleneck</strong>. The fatest is called <strong>starved</strong>, because it needs to wait for other stages to be done.</p><p>A coarse division of the real-time rendering pipeline into four main stages: <strong>application</strong>, <strong>geometry processing</strong>, <strong>rasterization</strong>, and <strong>pixel processing</strong>. <img src=\"http://ws3.sinaimg.cn/large/006tNbRwgy1fvky38kt49j312u08qabi.jpg\" alt></p><h3 id=\"Application-Stage\"><a href=\"#Application-Stage\" class=\"headerlink\" title=\"Application Stage\"></a>Application Stage</h3><p>Running on CPUs.</p><p>But some application work can be performed by the GPU, using a separate mode called a <strong>compute shader</strong>. This mode treats the GPU as a highly parallel general processor, ignoring its special functionality meant speciﬁcally for rendering graphics.</p><p>Some of the tasks traditionally performed on the CPU include <strong>collision detection</strong>, global acceleration algorithms, animation, physics simulation, and many others, depending on the type of application.</p><p>The application stage is also the place to take care of input from other sources, such as the keyboard, the mouse, or a head-mounted display.</p><p>Acceleration algorithms, such as particular culling algorithms (Chapter 19), are also implemented here, along with whatever else the rest of the pipeline cannot handle.</p><p>Output: <strong>Rendering Primitives</strong>, i.e., points, lines, and triangles, that might eventually end up on the screen.</p><h3 id=\"Geometry-Processing\"><a href=\"#Geometry-Processing\" class=\"headerlink\" title=\"Geometry Processing\"></a>Geometry Processing</h3><p>Running on GPUs.</p><p>The geometry processing stage on the GPU is responsible for most of the per-triangle and per-vertex operations.</p><p>This stage is further divided into the following functional stages: <strong>vertex shading</strong>, <strong>projection</strong>, <strong>optional vertex processing</strong>, <strong>clipping</strong>, and <strong>screen mapping</strong><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwgy1fvlumsdzcij314806s74z.jpg\" alt></p><h5 id=\"Vertex-Shading\"><a href=\"#Vertex-Shading\" class=\"headerlink\" title=\"Vertex Shading\"></a>Vertex Shading</h5><p>Two main tasks:</p><ul><li><p>computing the position for a vertex, also called <strong>MVP</strong><br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwgy1fvlycbvpb0j31as09c0x5.jpg\" alt></p></li><li><p>evaluate whatever the programmer may like to have as vertex output data (such as a normal and texture coordinates)<br>The operation of determining the eﬀect of a light on a material is known as shading. Shading may be performed on a model’s vertices or during per-pixel processing.<br>A variety of material data can be stored at each vertex, such as the point’s location, a normal, a color.</p></li></ul><h5 id=\"Projection\"><a href=\"#Projection\" class=\"headerlink\" title=\"Projection\"></a>Projection</h5><p>Projection is expressed as a matrix.</p><ul><li><p>orthographic(parallel) projection<br>Transforming a rectangular box to a unit cube, and parallel lines remain parallel after the transform.</p></li><li><p>perspective projection<br>Perspective Frustum(截头视椎体)</p></li></ul><p>Then follows Normalized Device Coordinates(NDC, 坐标归一化).</p><p>Both orthographic and perspective transforms can be constructed with 4 × 4 matrices.</p><p>They are called projections because after display, the z-coordinate is not stored in the image generated but is stored in a z-buﬀer. In this way, the models are projected from three to two dimensions.</p><h5 id=\"Optional-Vertex-Processing\"><a href=\"#Optional-Vertex-Processing\" class=\"headerlink\" title=\"Optional Vertex Processing\"></a>Optional Vertex Processing</h5><p>Their use depends both on the capabilities of the hardware—not all GPUs have them—and the desires of the programmer.</p><ul><li><p>Tessellation(图元细分)<br>The camera for the scene can be used to determine how many triangles are generated: many when the patch is close, few when it is far away.</p></li><li><p>Geometry Shader<br>It can be used for particle generation(粒子生成).<br>Imagine simulating a ﬁreworks explosion. Each ﬁreball could be represented by a point, a single vertex. The geometry shader can take each point and turn it into a square (made of two triangles) that faces the viewer and covers several pixels, so providing a more convincing primitive for us to shade.</p></li><li><p>Stream Output<br>It can be used for particle simulations(粒子模拟).<br>This stage lets us use the GPU as a geometry engine. Instead of sending our processed vertices down the rest of the pipeline to be rendered to the screen, at this point we can optionally output these to an array for further processing. These data can be used by the CPU, or the GPU itself, in a later pass.</p></li></ul><p>These three stages are performed in this order—tessellation, geometry shading, and stream output—and each is optional.</p><h5 id=\"Clipping\"><a href=\"#Clipping\" class=\"headerlink\" title=\"Clipping\"></a>Clipping</h5><p>Only the primitives wholly or partially inside the view volume need to be passed on to subsequent stage.</p><p>The primitives that are partially inside the view volume require clipping. And some new vertices will be located at the intersection between the line and the view volume.</p><p>The advantage of performing the view transformation and projection before clipping is that it makes the clipping problem consistent; primitives are always clipped against the unit cube.</p><p>Finally, perspective division(division by w) is performed, which places the resulting triangles’ positions into three-dimensional normalized device coordinates.</p><h5 id=\"Screen-Mapping\"><a href=\"#Screen-Mapping\" class=\"headerlink\" title=\"Screen Mapping\"></a>Screen Mapping</h5><p>The coordinates are still three-dimensional when entering this stage.</p><p>The x- and y-coordinates of each primitive are transformed to form <strong>screen coordinates</strong>. Screen coordinates together with the z-coordinates are also called <strong>window coordinates</strong>. <img src=\"http://ws3.sinaimg.cn/large/006tNbRwgy1fvm5dlvnspj315k0cgtaa.jpg\" alt></p><p>The last step in the geometry stage is to convert from NDC to window coordinates.</p><h3 id=\"Rasterization\"><a href=\"#Rasterization\" class=\"headerlink\" title=\"Rasterization\"></a>Rasterization</h3><p>Rasterization, also called <strong>scan conversion</strong>, is thus the conversion from two-dimensional vertices in screen space—each with a z-value (depth value) and various shading information asso- ciated with each vertex—into pixels on the screen.<br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fwejqvij03j30xe07yjt2.jpg\" alt></p><h5 id=\"Triangle-Setup\"><a href=\"#Triangle-Setup\" class=\"headerlink\" title=\"Triangle Setup\"></a>Triangle Setup</h5><p>In this stage the diﬀerentials, edge equations, and other data for the triangle are computed. Fixed- function hardware is used for this task.</p><h5 id=\"Triangle-Traversal\"><a href=\"#Triangle-Traversal\" class=\"headerlink\" title=\"Triangle Traversal\"></a>Triangle Traversal</h5><p>Finding which samples or pixels are inside a triangle is often called triangle traversal.</p><h3 id=\"Pixel-Processing\"><a href=\"#Pixel-Processing\" class=\"headerlink\" title=\"Pixel Processing\"></a>Pixel Processing</h3><p>At this point, all the pixels that are considered inside a triangle or other primitive have been found as a consequence of the combination of all the previous stages.</p><p>Pixel processing is the stage where per-pixel or per-sample computations and operations are performed on pixels or samples that are inside a primitive.</p><blockquote><p>In computer graphics, a sample is an intersection of channel and a pixel.</p></blockquote><h5 id=\"Pixel-Shading\"><a href=\"#Pixel-Shading\" class=\"headerlink\" title=\"Pixel Shading\"></a>Pixel Shading</h5><p>The end product is a color value for each fragment. And this stage is executed by programmable GPU cores. The programmer supplies a program for the fragment shader, which can contain any desired computations.</p><p>Texturing is employed here.</p><h5 id=\"Merging\"><a href=\"#Merging\" class=\"headerlink\" title=\"Merging\"></a>Merging</h5><p>Combine the fragment color produced by the pixel shading stage with the color currently stored in the buﬀer.</p><p>Unlike the shading stage, the GPU subunit that performs this stage is typically not fully programmable. However, it is highly conﬁgurable, enabling various eﬀects.</p><p>This stage is also responsible for resolving visibility.</p><ul><li><p>Alpha Test</p></li><li><p>Stencil Buﬀer</p></li><li><p>Frame Buffer<br>It generally consists of all the buﬀers on a system</p></li><li><p>Depth Test<br>It is done with the z-buﬀer algorithm. However, z-buﬀer algorithm cannot be used for partially transparent primitives. These must be rendered after all opaque primitives, and in back-to-front order, or using a separate order-independent algorithm (Section 5.5). Transparency is one of the major weaknesses of the basic z-buﬀer.</p></li><li><p>Double Buﬀer</p></li></ul><h3 id=\"Through-the-Pipeline\"><a href=\"#Through-the-Pipeline\" class=\"headerlink\" title=\"Through the Pipeline\"></a>Through the Pipeline</h3><p><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fwept51i6qj31460s87bu.jpg\" alt></p>"},{"title":"RealTimeRendering Ch.1","path":"2018/09/12/RealTimeRendering1/","permalink":"https://jinnm.github.io/2018/09/12/RealTimeRendering1/","content":"<h5 id=\"Display-Rate-amp-Refresh-Rate\"><a href=\"#Display-Rate-amp-Refresh-Rate\" class=\"headerlink\" title=\"Display Rate &amp; Refresh Rate\"></a>Display Rate &amp; Refresh Rate</h5><p>Display rate is expressed in frames per second(FPS) when refresh rate is expressed in Hertz(Hz). For example, Movie projectors show frames at 24 FPS but use a shutter system to display each frame two to four times to avoid ﬂicker. A shutter that illuminates the frame three times has a 72 Hz refresh rate.</p>"},{"title":"Learn Unity Shader 2","path":"2018/09/08/LearnUnityShader2/","permalink":"https://jinnm.github.io/2018/09/08/LearnUnityShader2/","content":"<h3 id=\"Marterial-Shader-Texture\"><a href=\"#Marterial-Shader-Texture\" class=\"headerlink\" title=\"Marterial, Shader, Texture\"></a>Marterial, Shader, Texture</h3><p>Material是渲染结果，Shader是渲染过程，方式，Texture是渲染中的一个参数</p><h3 id=\"Unity-Shader-Code-Struct\"><a href=\"#Unity-Shader-Code-Struct\" class=\"headerlink\" title=\"Unity Shader Code Struct\"></a>Unity Shader Code Struct</h3><p><img src=\"http://ws4.sinaimg.cn/large/0069RVTdgy1fv2ea1ir8cj30k40migp3.jpg\" alt></p><h5 id=\"Properties\"><a href=\"#Properties\" class=\"headerlink\" title=\"Properties\"></a>Properties</h5><p>输入的一些参数<br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwgy1fv60i0oc7zj30q60ioajs.jpg\" alt></p><h5 id=\"SubShader\"><a href=\"#SubShader\" class=\"headerlink\" title=\"SubShader\"></a>SubShader</h5><p>Unity会调用第一个显卡可用的Shader，且只调用一个，所以高级的SubShader写在前面</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SubShader&#123;[Tags][LOD][RenderSetup]Passdef[Passdef...]&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>Tags</strong>: 一般写成以下形式<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Tags&#123; &quot;Queue&quot; = &quot;Geometry - 20&quot; &quot;RenderType&quot; = &quot;Opaque&quot; &#125;</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ws4.sinaimg.cn/large/0069RVTdgy1fv2ea28ll8j30q20jiqe3.jpg\" alt></p><p>&emsp;&emsp;下面介绍一下Tags中的Queue和Render Type<br>&emsp;&emsp;<strong>Queue</strong>: 表示渲染顺序，值越高渲染越后面，叠的越前面<br><img src=\"http://ws1.sinaimg.cn/large/0069RVTdgy1fv2ea2wj2sj30q00joald.jpg\" alt></p><p>&emsp;&emsp;<strong>Render Type</strong>: 一般用于以下两个函数</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Camera.RenderWithShader(Shader shader, string replacementTag);</span><br><span class=\"line\">Camera.SetReplacementShader(Shader shader, string replacementTag);</span><br></pre></td></tr></table></figure><p><img src=\"http://ws3.sinaimg.cn/large/006tNbRwgy1fv60ij99r8j30se0iwn32.jpg\" alt></p><ul><li><p><strong>LOD</strong>: Level of Detail<br>&emsp;&emsp;可以设置支持的最大LOD(shader.maximumLOD),那么有比这个值大的LOD的shader就不会被执行</p></li><li><p><strong>RenderSetup</strong>: 一些设定值<br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwgy1fv60jb2waaj30q00eowhq.jpg\" alt></p></li><li><p><strong>Pass</strong>: 一个pass是一个完整的Graphics Pipeline<br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwgy1fv60jnbl76j30q00aqdlj.jpg\" alt><br>&emsp;&emsp;UsePass{}: 在其中定义一个name，可让其他shader去抓，达到重复利用的效果<br>&emsp;&emsp;GrabPass{}: 抓取画面中的渲染结果，存到一张贴图，再对它进行一些细节操作，比如玻璃效果、模糊效果</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Pass&#123;[Name and Tags][RenderSetup]&#125;</span><br></pre></td></tr></table></figure></li></ul><p>&emsp;&emsp;如果在前面的RenderSetup里面写的话，下面的每个Pass都会被套用，在Pass里写就是自己用</p><h5 id=\"FallBack\"><a href=\"#FallBack\" class=\"headerlink\" title=\"FallBack\"></a>FallBack</h5><p>所有SubShader都不能用时，当备用</p><h3 id=\"Unity-Shader-Category\"><a href=\"#Unity-Shader-Category\" class=\"headerlink\" title=\"Unity Shader Category\"></a>Unity Shader Category</h3><h5 id=\"Fixed-Function-Shader\"><a href=\"#Fixed-Function-Shader\" class=\"headerlink\" title=\"Fixed Function Shader\"></a>Fixed Function Shader</h5><ul><li>不可程式码编辑要用选项式（设定式）</li><li>完全使用ShaderLab命令</li><li>支持旧设备</li><li>用于简单效果</li></ul><h5 id=\"Surface-Shader\"><a href=\"#Surface-Shader\" class=\"headerlink\" title=\"Surface Shader\"></a>Surface Shader</h5><ul><li>可程式码编辑（CGPROGRAM…ENDCG，CG语法）</li><li>编辑多个Pass</li><li>编译Vertex Shader，Fragment Shader</li><li>硬件帮我们封装了很多光影处理细节和光照模式</li></ul><h5 id=\"Vertex-and-Fragment-Shader\"><a href=\"#Vertex-and-Fragment-Shader\" class=\"headerlink\" title=\"Vertex and Fragment Shader\"></a>Vertex and Fragment Shader</h5><ul><li>可程式码编辑（CGPROGRAM…ENDCG，CG语法）</li><li>最灵活弹性，语法最复杂</li><li>特别的效果（顶点位置改变，部分颜色混合）</li></ul><h3 id=\"A-Shader-Example\"><a href=\"#A-Shader-Example\" class=\"headerlink\" title=\"A Shader Example\"></a>A Shader Example</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Shader &quot;Custom/Sample&quot;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tProperties</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t_Texture(&quot;Texture&quot;, 2D) = &quot;White&quot; &#123;&#125;</span><br><span class=\"line\">\t\t_Color(&quot;Color&quot;, Color) = (1,1,1,1)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tSubShader</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tTags&#123; &quot;Queue&quot; = &quot;Geometry&quot; &quot;RenderType&quot; = &quot;Opaque&quot; &#125;</span><br><span class=\"line\">\t\tLOD 100</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tPass</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tCGPGOGRAM                  //CG语言开始</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t#pragma vertex vert        //定义一个VS</span><br><span class=\"line\">\t\t\t#pragma fragment frag      //定义一个FS</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tsampler2D _Texture;        //把输入的东西拿进来</span><br><span class=\"line\">\t\t\tfixed4 _Color;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t//输入参数的结构</span><br><span class=\"line\">\t\t\tstruct appdata&#123;</span><br><span class=\"line\">\t\t\t\tfixed4 vertex : POSITION; </span><br><span class=\"line\">\t\t\t\t//大写的POSITION是个semantics（语义）告诉Unity这个变量的含义是要一个顶点位置</span><br><span class=\"line\">\t\t\t\tfixed2 uv : TEXCOORD0;</span><br><span class=\"line\">\t\t\t\t//0是第一个uv位置</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t//VS到FS参数传递的结构</span><br><span class=\"line\">\t\t\tstruct v2f&#123;</span><br><span class=\"line\">\t\t\t\tfixed4 vertex : SV_POSITION; </span><br><span class=\"line\">\t\t\t\t//SV_前缀的变量代表system value，代表最后是到屏幕的坐标值</span><br><span class=\"line\">\t\t\t\tfixed2 uv : TEXCOORD0;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t//vertex shader输入是POSITION，输出是SV_POSITION</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t//开始写方法</span><br><span class=\"line\">\t\t\tv2f vert(appdata i)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tv2f o;</span><br><span class=\"line\">\t\t\t\to.uv = i.uv;</span><br><span class=\"line\">\t\t\t\t//坐标转化MVP(Model-View-Projection)</span><br><span class=\"line\">\t\t\t\to.vertex = mul(UNITY_MATRIX_MVP, i.vertex); </span><br><span class=\"line\">\t\t\t\treturn o;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t//FS输出颜色值，所以输出类型是fixed4，SV_Target也是emantics，即渲染目标</span><br><span class=\"line\">\t\t\tfixed4 frag(v2f v) : SV_Target</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t//将贴图根据uv位置贴上，再跟原来的颜色值做混合</span><br><span class=\"line\">\t\t\t\treturn tex2D(_Texture, v.uv) * _Color;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tENDCG                 //CG语言结束</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"Learn Unity Shader 1","path":"2018/09/06/LearnUnityShader1/","permalink":"https://jinnm.github.io/2018/09/06/LearnUnityShader1/","content":"<p>大致了解Graphics Pipeline</p><h3 id=\"Mesh\"><a href=\"#Mesh\" class=\"headerlink\" title=\"Mesh\"></a>Mesh</h3><p><img src=\"http://ws1.sinaimg.cn/large/0069RVTdgy1fv1y0kh5rhj31de0moqa4.jpg\" alt=\"avatar\"><br>Mesh是一个点，法向量，面的集合，它定义了一个3D物体的形状（可了解一下Mesh的数据结构）</p><h3 id=\"CPU-to-GPU\"><a href=\"#CPU-to-GPU\" class=\"headerlink\" title=\"CPU to GPU\"></a>CPU to GPU</h3><ul><li>把数据加载到显存中</li><li>设置渲染状态</li><li>调用Draw Call</li></ul><h3 id=\"Simple-Graphics-Pipeline\"><a href=\"#Simple-Graphics-Pipeline\" class=\"headerlink\" title=\"Simple Graphics Pipeline\"></a>Simple Graphics Pipeline</h3><p>Hello Triangle这一章首次介绍了Graphics Pipeline， 不过是个简化版<br>$$<br>\\begin{eqnarray}<br>Vertex Data \\quad \\rightarrow \\quad Vertex Shader \\quad \\rightarrow \\quad Shape Assembly \\quad \\rightarrow \\quad Geometry Shader<br>\\end{eqnarray}<br>$$<br>$$<br>\\begin{eqnarray}<br>\\rightarrow \\quad Rasterization \\quad \\rightarrow \\quad Fragment Shader \\quad \\rightarrow \\quad Tests and blending<br>\\end{eqnarray}<br>$$</p><p>于是去了解了一下详细版本的图形渲染管线</p><h3 id=\"Programmable-Graphics-Pipeline\"><a href=\"#Programmable-Graphics-Pipeline\" class=\"headerlink\" title=\"Programmable Graphics Pipeline\"></a>Programmable Graphics Pipeline</h3><p><img src=\"http://ws4.sinaimg.cn/large/0069RVTdgy1fv1y0l521bj31ds0pianh.jpg\" alt=\"avatar\"></p><h5 id=\"Application-Stage\"><a href=\"#Application-Stage\" class=\"headerlink\" title=\"Application Stage\"></a>Application Stage</h5><p>物体在应用层，正要把Mesh传入GPU前端<br>输入：Geometry Primitives(图元)<br>&emsp;&emsp;即一到多个顶点、线段、几何体<br>&emsp;&emsp;Vertex Data<br>&emsp;&emsp;包括Vertex position<br>&emsp;&emsp;&emsp;&emsp;Vertex normal vector<br>&emsp;&emsp;&emsp;&emsp;Vertex color<br>&emsp;&emsp;&emsp;&emsp;Texture coordinate(UV)贴图位置<br>输出到GPU</p><h5 id=\"Geometry-Stage\"><a href=\"#Geometry-Stage\" class=\"headerlink\" title=\"Geometry Stage\"></a>Geometry Stage</h5><ul><li><p><strong>Vertex Shader</strong>: 对于输入进来的每个顶点都会调用顶点着色器。它本身不会创建或者销毁任何顶点，而且无法得知顶点间的联系。但是这样的独立性和适合GPU，可以并行处理大量顶点。<br>&emsp;&emsp;包括Operates vertices改变顶点位置<br>&emsp;&emsp;&emsp;&emsp;Vertex transformation(Model-View-Projection)<br>&emsp;&emsp;&emsp;&emsp;Texture coordinate transformations贴图位置转换<br>&emsp;&emsp;&emsp;&emsp;Per-vertex lighting<br>&emsp;&emsp;其中Vertex transformation的流程为：<br>$$<br>\\begin{eqnarray}<br>object/local space \\quad \\underrightarrow{\\text{ modelling transformation }} \\quad world space \\quad \\underrightarrow{\\text{ viewing transformation }}<br>\\end{eqnarray}<br>$$<br>$$<br>\\begin{eqnarray}<br>view/eye space \\quad \\underrightarrow{\\text{ projection transformation }} \\quad clip space<br>\\end{eqnarray}<br>$$<br>&emsp;&emsp;之后在Perspective Frustum(截头视椎体)中做透视除法，将坐标转换到Normalized Device Coordinates(NDC,归一化坐标)中。注意Unity中除了观察空间是右手坐标系之外，其他都是左手坐标系。所以viewing transformation matrix和projection transformation matrix都是会改变空间旋向性的。</p></li><li><p><strong>Primitive Assembly</strong>: &emsp;&emsp;把顶点装配成三角形</p></li><li><p><strong>Tessellation Shader</strong>: &emsp;&emsp;图元细分，是可选项</p></li><li><p><strong>Geometry Shader</strong>: &emsp;&emsp;几何着色器，也是可选项。基本做的是顶点的增减，性能较差因为不像VS和FS那样高度并行。是继VS、FS之后，由Shader Model 4（第四代显卡着色架构）正式引入的第三个着色器。具体可参考Refrence第三条。</p></li><li><p><strong>Clipping</strong>: &emsp;&emsp;把NDC之外的剔除</p></li><li><p><strong>Screen Mapping</strong>: &emsp;&emsp;3D的点转化到2D</p></li></ul><h5 id=\"Rasterization-Stage\"><a href=\"#Rasterization-Stage\" class=\"headerlink\" title=\"Rasterization Stage\"></a>Rasterization Stage</h5><ul><li><p><strong>Rasterization &amp; Interpolation</strong>: &emsp;&emsp;把三角形的区域变成一片一片的fragment 以及 对颜色渐变做差值运算<br><img src=\"http://ws2.sinaimg.cn/large/0069RVTdgy1fv1y0ltmgwj31cu0ho47l.jpg\" alt=\"avatar\"></p></li><li><p><strong>Fragment Shader</strong>: &emsp;&emsp;输入一片一片的fragment，对每个fragment进行着色<br>&emsp;&emsp;texture mapping：把贴图根据UV的位置贴上来</p></li><li><p><strong>Raster Operation</strong>: &emsp;&emsp;光栅操作，各种测试<br><img src=\"http://ws3.sinaimg.cn/large/0069RVTdgy1fv1y0jok8uj30vo0igtee.jpg\" alt=\"avatar\"><br>&emsp;&emsp;Early-Z：把Depth test提前到fragment前，节省FS需要处理的片元<br>&emsp;&emsp;Double Buffering：一个buffer正在用于屏幕绘制，一个buffer正在被写入数据</p></li></ul><p>Reference<br>1、<a href=\"http://www.youtube.com/watch?v=fhmf5PacfVg&amp;list=PLxMD5A4JpjsouiyE14Jag6TceLeJyIZ7h\" target=\"_blank\" rel=\"noopener\">http://www.youtube.com/watch?v=fhmf5PacfVg&amp;list=PLxMD5A4JpjsouiyE14Jag6TceLeJyIZ7h</a><br>2、<a href=\"http://learnopengl-cn.github.io/\" target=\"_blank\" rel=\"noopener\">http://learnopengl-cn.github.io/</a><br>3、<a href=\"http://gad.qq.com/article/detail/14718\" target=\"_blank\" rel=\"noopener\">http://gad.qq.com/article/detail/14718</a><br>4、Unity Shader入门精要（看过这本书之后对这篇博文做了补充和修改）</p>"},{"title":"场景设计与表现","path":"2018/08/22/changjingsheji/","permalink":"https://jinnm.github.io/2018/08/22/changjingsheji/","content":"<p>这是一门专业必修课的小组作业。</p><p>故事背景：在经历大型陨石雨的毁灭性打击后，吉祥寺院因所处地形奇特而免受打击，其中的僧人幸运的活了下来，然而由于旁边可以采购食品、日用品的小镇不复存在，僧人们只好另寻他处，并建立了新的基地，这个基地除了寺庙之外，还包括食物系统、水资源系统、交通运输系统、防御系统。这里就放一下我负责的交通运输部分。</p><p><img src=\"http://ws2.sinaimg.cn/large/006tNbRwgy1ful5u3i93pj31kw2db1l0.jpg\" alt=\"avatar\"></p>"},{"title":"Game || Beautifnl World","path":"2018/08/08/Game-Beautifnl-World/","permalink":"https://jinnm.github.io/2018/08/08/Game-Beautifnl-World/","content":"<p>It’s a game made at NUS Summer Workshop.</p><p>The game’s name isn’t a spelling mistake. There is an “end” in the game’s name.</p><p>Our hero is a character in a game where the server is going to be shut down. But his last player, a girl, gives him the courage to escape from the game world. In this process he is going to overcome obstacles and unlock puzzles, then he will find his destiny.</p><p>Click <a href=\"http://jinnm.github.io/Group04Final/\">http://jinnm.github.io/Group04Final/</a> to play! <img src=\"http://ws2.sinaimg.cn/large/006tNbRwgy1ful9kl4o8mj31kw28jnmk.jpg\" alt=\"avatar\"></p>"},{"title":"设计 || 一些意义特殊的平面设计","path":"2018/08/07/design3/","permalink":"https://jinnm.github.io/2018/08/07/design3/","content":"<p>一晃两年过去了，总结一下这两年中一些意义特殊的平面设计</p><p>翻看文件夹时不由的感叹，很多当时看着还不错的海报，现在看来……都不好意思拿出手了</p><p>第一个是我刚进大学面试学生会做的作业，主题是舒服，然后我做了一张批判舒适的海报（当时的脑回路好清奇啊），最后的面试是失败了，不过当时面试官的有些话对之后的我影响很大。<br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwgy1fv5z9q0cxjj31hc26pkjn.jpg\" alt></p><p>第二个是工业设计协会时期，第一次不为任务而做宣传品，类似于自己的练习吧，可以自由选择想要介绍的东西，不过云马的文案是乱写的emmm<br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwgy1fv5znsdr0cj31kw28fhdt.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwgy1fv5za29ow9j31kw165qv6.jpg\" alt><br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwgy1fv5za9o0wdj31kw15zqv8.jpg\" alt></p><p>第三个是社团联创意与设计中心（简称创设）的logo，也是我第一次做logo，右上角四个图案为“创”，左下角四个图案为“设”，黄色是部门的主题色啦<br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwgy1fv5zalfk7mj30hc0qeab1.jpg\" alt></p><p>第四个是选择大二继续在社团联留一年后做的纳新海报，大一一整年都觉得自己不会选择留下来，结果等到真的要分别的时候突然感觉舍不得。<br><img src=\"http://ws4.sinaimg.cn/large/006tNbRwgy1fv5zne6yp1j31kw28g4qs.jpg\" alt></p><p>最后一个是这辈子做过最快的海报，因为是突然得知消息说小游戏的展示需要海报，于是花了五分钟把图和字扔上去然后光速打印……这是第一次给自己的产品做海报<br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwgy1fv5zcd02baj31kw28jnmk.jpg\" alt></p>"},{"title":"设计 || 晚会门票","path":"2018/05/26/design1/","permalink":"https://jinnm.github.io/2018/05/26/design1/","content":"<p>社团建设月闭幕式是晚会的形式，晚会上将会有优秀社团的演出，与各大社团奖项的颁发，还有一个特别的环节——优秀社团人分享。</p><p>本次建设月闭幕式的主题是毕业季，甲方给我们的设计关键词有纸飞机、白鸽等这些放飞希望的象征。海报已经差不多定稿，见下图。<br><img src=\"http://ws1.sinaimg.cn/large/006tNbRwly1fwy4wu5qunj31kw28gnek.jpg\" alt></p><p>这次接到的锅是门票设计，初衷是设计一款令人印象深刻的门票。考虑到自己去看晚会时，门票拿在手里会折来折去，这次的设计关键词又有纸飞机，于是决定设计一款可以折叠成纸飞机的门票。门票上会设计好折痕，并在折痕边标注折这一步的序号。同时注意与海报风格相统一。<br><img src=\"http://ws2.sinaimg.cn/large/006tNbRwly1fwy5v9t774j317z1qd77w.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNbRwly1fwy5u9s3vtj317z1qdq51.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNc79ly1fzt7o0xp1gj30u01hcwqr.jpg\" alt><br><img src=\"http://ws1.sinaimg.cn/large/006tNc79ly1fzt7o14yq2j30u0140tac.jpg\" alt><br><img src=\"http://ws3.sinaimg.cn/large/006tNc79ly1fzt7o1a3b7j30rw0pc421.jpg\" alt></p>"},{"title":"About Me","path":"2018/04/29/AboutMe/","permalink":"https://jinnm.github.io/2018/04/29/AboutMe/","content":"<p>数字媒体技术16级本科<br>浙江舟山人<br>处女座</p><p>瑞克和莫蒂粉丝<br>权力的游戏粉丝<br>进击的巨人粉丝</p><p>喜欢一切好看的东西<br>喜欢DianYin(g)<br>喜欢收集表情包</p><p>喜欢科幻奇幻大片<br>喜欢宇宙飞船<br>喜欢奇异世界</p><p>漫威粉丝<br>其中最喜欢变种人<br>其中最喜欢死侍</p><p>皮克斯粉丝<br>其中最喜欢<br>…很难说</p><p>喜欢折腾自己的电脑<br>喜欢不断的搜索未知事物<br>这两件事让我电脑前趴一天</p><p>梦想是成为<br>一个会代码的设计师<br>反过来也行！</p><p>网站的logo是名字缩写JM拼成的雨伞~</p>"}]}