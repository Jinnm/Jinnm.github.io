<!DOCTYPE html><html class="theme-next pisces use-motion"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css"><meta name="keywords" content="ComputerGraphics,"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2"><meta name="description" content="ArchitectureThe speed of the pipelines is determined by the speed of the slowest stage called bottleneck. The fatest is called starved, because it needs to wait for other stages to be done.A coarse di"><meta name="keywords" content="ComputerGraphics"><meta property="og:type" content="article"><meta property="og:title" content="RealTimeRendering Ch.2"><meta property="og:url" content="http://Jinnm.github.io/2018/09/24/RealTimeRendering2/index.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="ArchitectureThe speed of the pipelines is determined by the speed of the slowest stage called bottleneck. The fatest is called starved, because it needs to wait for other stages to be done.A coarse di"><meta property="og:locale" content="default"><meta property="og:image" content="http://jinnm.github.io/2018/09/24/RealTimeRendering2/"><meta property="og:image" content="http://jinnm.github.io/2018/09/24/RealTimeRendering2/"><meta property="og:image" content="http://jinnm.github.io/2018/09/24/RealTimeRendering2/"><meta property="og:image" content="http://jinnm.github.io/2018/09/24/RealTimeRendering2/"><meta property="og:image" content="http://jinnm.github.io/2018/09/24/RealTimeRendering2/"><meta property="og:image" content="http://jinnm.github.io/2018/09/24/RealTimeRendering2/"><meta property="og:updated_time" content="2018-10-20T11:50:23.112Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="RealTimeRendering Ch.2"><meta name="twitter:description" content="ArchitectureThe speed of the pipelines is determined by the speed of the slowest stage called bottleneck. The fatest is called starved, because it needs to wait for other stages to be done.A coarse di"><meta name="twitter:image" content="http://jinnm.github.io/2018/09/24/RealTimeRendering2/"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",sidebar:{position:"left",display:"post",offset:12,offset_float:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:!0,duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://Jinnm.github.io/2018/09/24/RealTimeRendering2/"><title>RealTimeRendering Ch.2 | Hexo</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="default"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Hexo</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>Tags</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://Jinnm.github.io/2018/09/24/RealTimeRendering2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="John Doe"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hexo"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">RealTimeRendering Ch.2</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-24T21:01:43+08:00">2018-09-24</time></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h3><p>The speed of the pipelines is determined by the speed of the slowest stage called <strong>bottleneck</strong>. The fatest is called <strong>starved</strong>, because it needs to wait for other stages to be done.</p><p>A coarse division of the real-time rendering pipeline into four main stages: <strong>application</strong>, <strong>geometry processing</strong>, <strong>rasterization</strong>, and <strong>pixel processing</strong>.<br><img src="/2018/09/24/RealTimeRendering2/" data-echo="https://ws3.sinaimg.cn/large/006tNbRwgy1fvky38kt49j312u08qabi.jpg" alt></p><h3 id="Application-Stage"><a href="#Application-Stage" class="headerlink" title="Application Stage"></a>Application Stage</h3><p>Running on CPUs.</p><p>But some application work can be performed by the GPU, using a separate mode called a <strong>compute shader</strong>. This mode treats the GPU as a highly parallel general processor, ignoring its special functionality meant speciﬁcally for rendering graphics.</p><p>Some of the tasks traditionally performed on the CPU include <strong>collision detection</strong>, global acceleration algorithms, animation, physics simulation, and many others, depending on the type of application.</p><p>The application stage is also the place to take care of input from other sources, such as the keyboard, the mouse, or a head-mounted display.</p><p>Acceleration algorithms, such as particular culling algorithms (Chapter 19), are also implemented here, along with whatever else the rest of the pipeline cannot handle.</p><p>Output: <strong>Rendering Primitives</strong>, i.e., points, lines, and triangles, that might eventually end up on the screen.</p><h3 id="Geometry-Processing"><a href="#Geometry-Processing" class="headerlink" title="Geometry Processing"></a>Geometry Processing</h3><p>Running on GPUs.</p><p>The geometry processing stage on the GPU is responsible for most of the per-triangle and per-vertex operations.</p><p>This stage is further divided into the following functional stages: <strong>vertex shading</strong>, <strong>projection</strong>, <strong>optional vertex processing</strong>, <strong>clipping</strong>, and <strong>screen mapping</strong><br><img src="/2018/09/24/RealTimeRendering2/" data-echo="https://ws3.sinaimg.cn/large/006tNbRwgy1fvlumsdzcij314806s74z.jpg" alt></p><h5 id="Vertex-Shading"><a href="#Vertex-Shading" class="headerlink" title="Vertex Shading"></a>Vertex Shading</h5><p>Two main tasks:</p><ul><li><p>computing the position for a vertex, also called <strong>MVP</strong><br><img src="/2018/09/24/RealTimeRendering2/" data-echo="https://ws1.sinaimg.cn/large/006tNbRwgy1fvlycbvpb0j31as09c0x5.jpg" alt></p></li><li><p>evaluate whatever the programmer may like to have as vertex output data (such as a normal and texture coordinates)<br>The operation of determining the eﬀect of a light on a material is known as shading. Shading may be performed on a model’s vertices or during per-pixel processing.<br>A variety of material data can be stored at each vertex, such as the point’s location, a normal, a color.</p></li></ul><h5 id="Projection"><a href="#Projection" class="headerlink" title="Projection"></a>Projection</h5><p>Projection is expressed as a matrix.</p><ul><li><p>orthographic(parallel) projection<br>Transforming a rectangular box to a unit cube, and parallel lines remain parallel after the transform.</p></li><li><p>perspective projection<br>Perspective Frustum(截头视椎体)</p></li></ul><p>Then follows Normalized Device Coordinates(NDC, 坐标归一化).</p><p>Both orthographic and perspective transforms can be constructed with 4 × 4 matrices.</p><p>They are called projections because after display, the z-coordinate is not stored in the image generated but is stored in a z-buﬀer. In this way, the models are projected from three to two dimensions.</p><h5 id="Optional-Vertex-Processing"><a href="#Optional-Vertex-Processing" class="headerlink" title="Optional Vertex Processing"></a>Optional Vertex Processing</h5><p>Their use depends both on the capabilities of the hardware—not all GPUs have them—and the desires of the programmer.</p><ul><li><p>Tessellation(图元细分)<br>The camera for the scene can be used to determine how many triangles are generated: many when the patch is close, few when it is far away.</p></li><li><p>Geometry Shader<br>It can be used for particle generation(粒子生成).<br>Imagine simulating a ﬁreworks explosion. Each ﬁreball could be represented by a point, a single vertex. The geometry shader can take each point and turn it into a square (made of two triangles) that faces the viewer and covers several pixels, so providing a more convincing primitive for us to shade.</p></li><li><p>Stream Output<br>It can be used for particle simulations(粒子模拟).<br>This stage lets us use the GPU as a geometry engine. Instead of sending our processed vertices down the rest of the pipeline to be rendered to the screen, at this point we can optionally output these to an array for further processing. These data can be used by the CPU, or the GPU itself, in a later pass.</p></li></ul><p>These three stages are performed in this order—tessellation, geometry shading, and stream output—and each is optional.</p><h5 id="Clipping"><a href="#Clipping" class="headerlink" title="Clipping"></a>Clipping</h5><p>Only the primitives wholly or partially inside the view volume need to be passed on to subsequent stage.</p><p>The primitives that are partially inside the view volume require clipping. And some new vertices will be located at the intersection between the line and the view volume.</p><p>The advantage of performing the view transformation and projection before clipping is that it makes the clipping problem consistent; primitives are always clipped against the unit cube.</p><p>Finally, perspective division(division by w) is performed, which places the resulting triangles’ positions into three-dimensional normalized device coordinates.</p><h5 id="Screen-Mapping"><a href="#Screen-Mapping" class="headerlink" title="Screen Mapping"></a>Screen Mapping</h5><p>The coordinates are still three-dimensional when entering this stage.</p><p>The x- and y-coordinates of each primitive are transformed to form <strong>screen coordinates</strong>. Screen coordinates together with the z-coordinates are also called <strong>window coordinates</strong>.<br><img src="/2018/09/24/RealTimeRendering2/" data-echo="https://ws3.sinaimg.cn/large/006tNbRwgy1fvm5dlvnspj315k0cgtaa.jpg" alt></p><p>The last step in the geometry stage is to convert from NDC to window coordinates.</p><h3 id="Rasterization"><a href="#Rasterization" class="headerlink" title="Rasterization"></a>Rasterization</h3><p>Rasterization, also called <strong>scan conversion</strong>, is thus the conversion from two-dimensional vertices in screen space—each with a z-value (depth value) and various shading information asso- ciated with each vertex—into pixels on the screen.<br><img src="/2018/09/24/RealTimeRendering2/" data-echo="https://ws3.sinaimg.cn/large/006tNbRwly1fwejqvij03j30xe07yjt2.jpg" alt></p><h5 id="Triangle-Setup"><a href="#Triangle-Setup" class="headerlink" title="Triangle Setup"></a>Triangle Setup</h5><p>In this stage the diﬀerentials, edge equations, and other data for the triangle are computed. Fixed- function hardware is used for this task.</p><h5 id="Triangle-Traversal"><a href="#Triangle-Traversal" class="headerlink" title="Triangle Traversal"></a>Triangle Traversal</h5><p>Finding which samples or pixels are inside a triangle is often called triangle traversal.</p><h3 id="Pixel-Processing"><a href="#Pixel-Processing" class="headerlink" title="Pixel Processing"></a>Pixel Processing</h3><p>At this point, all the pixels that are considered inside a triangle or other primitive have been found as a consequence of the combination of all the previous stages.</p><p>Pixel processing is the stage where per-pixel or per-sample computations and operations are performed on pixels or samples that are inside a primitive.</p><blockquote><p>In computer graphics, a sample is an intersection of channel and a pixel.</p></blockquote><h5 id="Pixel-Shading"><a href="#Pixel-Shading" class="headerlink" title="Pixel Shading"></a>Pixel Shading</h5><p>The end product is a color value for each fragment. And this stage is executed by programmable GPU cores. The programmer supplies a program for the fragment shader, which can contain any desired computations.</p><p>Texturing is employed here.</p><h5 id="Merging"><a href="#Merging" class="headerlink" title="Merging"></a>Merging</h5><p>Combine the fragment color produced by the pixel shading stage with the color currently stored in the buﬀer.</p><p>Unlike the shading stage, the GPU subunit that performs this stage is typically not fully programmable. However, it is highly conﬁgurable, enabling various eﬀects.</p><p>This stage is also responsible for resolving visibility.</p><ul><li><p>Alpha Test</p></li><li><p>Stencil Buﬀer</p></li><li><p>Frame Buffer<br>It generally consists of all the buﬀers on a system</p></li><li><p>Depth Test<br>It is done with the z-buﬀer algorithm. However, z-buﬀer algorithm cannot be used for partially transparent primitives. These must be rendered after all opaque primitives, and in back-to-front order, or using a separate order-independent algorithm (Section 5.5). Transparency is one of the major weaknesses of the basic z-buﬀer.</p></li><li><p>Double Buﬀer</p></li></ul><h3 id="Through-the-Pipeline"><a href="#Through-the-Pipeline" class="headerlink" title="Through the Pipeline"></a>Through the Pipeline</h3><p><img src="/2018/09/24/RealTimeRendering2/" data-echo="https://ws2.sinaimg.cn/large/006tNbRwly1fwept51i6qj31460s87bu.jpg" alt></p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/ComputerGraphics/" rel="tag"># ComputerGraphics</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/09/12/RealTimeRendering1/" rel="next" title="RealTimeRendering Ch.1"><i class="fa fa-chevron-left"></i> RealTimeRendering Ch.1</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2018/10/05/movie1/" rel="prev" title="影评 || 情书，关于死亡">影评 || 情书，关于死亡 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview">Overview</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="John Doe"><p class="site-author-name" itemprop="name">John Doe</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">26</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">7</span> <span class="site-state-item-name">tags</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Architecture"><span class="nav-number">1.</span> <span class="nav-text">Architecture</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Application-Stage"><span class="nav-number">2.</span> <span class="nav-text">Application Stage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Geometry-Processing"><span class="nav-number">3.</span> <span class="nav-text">Geometry Processing</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Vertex-Shading"><span class="nav-number">3.0.1.</span> <span class="nav-text">Vertex Shading</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Projection"><span class="nav-number">3.0.2.</span> <span class="nav-text">Projection</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Optional-Vertex-Processing"><span class="nav-number">3.0.3.</span> <span class="nav-text">Optional Vertex Processing</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Clipping"><span class="nav-number">3.0.4.</span> <span class="nav-text">Clipping</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Screen-Mapping"><span class="nav-number">3.0.5.</span> <span class="nav-text">Screen Mapping</span></a></li></ol></li></ol><li class="nav-item nav-level-3"><a class="nav-link" href="#Rasterization"><span class="nav-number">4.</span> <span class="nav-text">Rasterization</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Triangle-Setup"><span class="nav-number">4.0.1.</span> <span class="nav-text">Triangle Setup</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Triangle-Traversal"><span class="nav-number">4.0.2.</span> <span class="nav-text">Triangle Traversal</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pixel-Processing"><span class="nav-number">5.</span> <span class="nav-text">Pixel Processing</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Pixel-Shading"><span class="nav-number">5.0.1.</span> <span class="nav-text">Pixel Shading</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Merging"><span class="nav-number">5.0.2.</span> <span class="nav-text">Merging</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Through-the-Pipeline"><span class="nav-number">6.</span> <span class="nav-text">Through the Pipeline</span></a></li></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">John Doe</span></div><div class="powered-by">Powered by <a class="theme-link" href="https://hexo.io">Hexo</a></div><div class="theme-info">Theme - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });</script><script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>